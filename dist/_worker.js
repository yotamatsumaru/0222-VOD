var wi=Object.defineProperty;var Hn=e=>{throw TypeError(e)};var Si=(e,t,r)=>t in e?wi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var T=(e,t,r)=>Si(e,typeof t!="symbol"?t+"":t,r),Zr=(e,t,r)=>t.has(e)||Hn("Cannot "+r);var f=(e,t,r)=>(Zr(e,t,"read from private field"),r?r.call(e):t.get(e)),x=(e,t,r)=>t.has(e)?Hn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),E=(e,t,r,n)=>(Zr(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),k=(e,t,r)=>(Zr(e,t,"access private method"),r);var Un=(e,t,r,n)=>({set _(s){E(e,t,s,r)},get _(){return f(e,t,n)}});var Zn=(e,t,r)=>(n,s)=>{let o=-1;return i(0);async function i(a){if(a<=o)throw new Error("next() called multiple times");o=a;let c,u=!1,l;if(e[a]?(l=e[a][0][0],n.req.routeIndex=a):l=a===e.length&&s||void 0,l)try{c=await l(n,()=>i(a+1))}catch(h){if(h instanceof Error&&t)n.error=h,c=await t(h,n),u=!0;else throw h}else n.finalized===!1&&r&&(c=await r(n));return c&&(n.finalized===!1||u)&&(n.res=c),n}},Bn=class extends Error{constructor(t=500,r){super(r==null?void 0:r.message,{cause:r==null?void 0:r.cause});T(this,"res");T(this,"status");this.res=r==null?void 0:r.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},xi=Symbol(),Oi=async(e,t=Object.create(null))=>{const{all:r=!1,dot:n=!1}=t,o=(e instanceof _o?e.raw.headers:e.headers).get("Content-Type");return o!=null&&o.startsWith("multipart/form-data")||o!=null&&o.startsWith("application/x-www-form-urlencoded")?ki(e,{all:r,dot:n}):{}};async function ki(e,t){const r=await e.formData();return r?Ai(r,t):{}}function Ai(e,t){const r=Object.create(null);return e.forEach((n,s)=>{t.all||s.endsWith("[]")?Ri(r,s,n):r[s]=n}),t.dot&&Object.entries(r).forEach(([n,s])=>{n.includes(".")&&(Ci(r,n,s),delete r[n])}),r}var Ri=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},Ci=(e,t,r)=>{let n=e;const s=t.split(".");s.forEach((o,i)=>{i===s.length-1?n[o]=r:((!n[o]||typeof n[o]!="object"||Array.isArray(n[o])||n[o]instanceof File)&&(n[o]=Object.create(null)),n=n[o])})},fo=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},$i=e=>{const{groups:t,path:r}=Ii(e),n=fo(r);return ji(n,t)},Ii=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{const s=`@${n}`;return t.push([s,r]),s}),{groups:t,path:e}},ji=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[n]=t[r];for(let s=e.length-1;s>=0;s--)if(e[s].includes(n)){e[s]=e[s].replace(n,t[r][1]);break}}return e},Xt={},zi=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const n=`${e}#${t}`;return Xt[n]||(r[2]?Xt[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:Xt[n]=[e,r[1],!0]),Xt[n]}return null},Mr=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},Mi=e=>Mr(e,decodeURI),mo=e=>{const t=e.url,r=t.indexOf("/",t.indexOf(":")+4);let n=r;for(;n<t.length;n++){const s=t.charCodeAt(n);if(s===37){const o=t.indexOf("?",n),i=t.indexOf("#",n),a=o===-1?i===-1?void 0:i:i===-1?o:Math.min(o,i),c=t.slice(r,a);return Mi(c.includes("%25")?c.replace(/%25/g,"%2525"):c)}else if(s===63||s===35)break}return t.slice(r,n)},Ni=e=>{const t=mo(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},rt=(e,t,...r)=>(r.length&&(t=rt(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),vo=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let n="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))n+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){r.length===0&&n===""?r.push("/"):r.push(n);const o=s.replace("?","");n+="/"+o,r.push(n)}else n+="/"+s}),r.filter((s,o,i)=>i.indexOf(s)===o)},Br=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Mr(e,xn):e):e,go=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let i=e.indexOf("?",8);if(i===-1)return;for(e.startsWith(t,i+1)||(i=e.indexOf(`&${t}`,i+1));i!==-1;){const a=e.charCodeAt(i+t.length+1);if(a===61){const c=i+t.length+2,u=e.indexOf("&",c);return Br(e.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";i=e.indexOf(`&${t}`,i+1)}if(n=/[%+]/.test(e),!n)return}const s={};n??(n=/[%+]/.test(e));let o=e.indexOf("?",8);for(;o!==-1;){const i=e.indexOf("&",o+1);let a=e.indexOf("=",o);a>i&&i!==-1&&(a=-1);let c=e.slice(o+1,a===-1?i===-1?void 0:i:a);if(n&&(c=Br(c)),o=i,c==="")continue;let u;a===-1?u="":(u=e.slice(a+1,i===-1?void 0:i),n&&(u=Br(u))),r?(s[c]&&Array.isArray(s[c])||(s[c]=[]),s[c].push(u)):s[c]??(s[c]=u)}return t?s[t]:s},Di=go,Gi=(e,t)=>go(e,t,!0),xn=decodeURIComponent,Jn=e=>Mr(e,xn),at,Q,me,yo,Po,gn,Te,ao,_o=(ao=class{constructor(e,t="/",r=[[]]){x(this,me);T(this,"raw");x(this,at);x(this,Q);T(this,"routeIndex",0);T(this,"path");T(this,"bodyCache",{});x(this,Te,e=>{const{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;const s=Object.keys(t)[0];return s?t[s].then(o=>(s==="json"&&(o=JSON.stringify(o)),new Response(o)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,E(this,Q,r),E(this,at,{})}param(e){return e?k(this,me,yo).call(this,e):k(this,me,Po).call(this)}query(e){return Di(this.url,e)}queries(e){return Gi(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await Oi(this,e))}json(){return f(this,Te).call(this,"text").then(e=>JSON.parse(e))}text(){return f(this,Te).call(this,"text")}arrayBuffer(){return f(this,Te).call(this,"arrayBuffer")}blob(){return f(this,Te).call(this,"blob")}formData(){return f(this,Te).call(this,"formData")}addValidatedData(e,t){f(this,at)[e]=t}valid(e){return f(this,at)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[xi](){return f(this,Q)}get matchedRoutes(){return f(this,Q)[0].map(([[,e]])=>e)}get routePath(){return f(this,Q)[0].map(([[,e]])=>e)[this.routeIndex].path}},at=new WeakMap,Q=new WeakMap,me=new WeakSet,yo=function(e){const t=f(this,Q)[0][this.routeIndex][1][e],r=k(this,me,gn).call(this,t);return r&&/\%/.test(r)?Jn(r):r},Po=function(){const e={},t=Object.keys(f(this,Q)[0][this.routeIndex][1]);for(const r of t){const n=k(this,me,gn).call(this,f(this,Q)[0][this.routeIndex][1][r]);n!==void 0&&(e[r]=/\%/.test(n)?Jn(n):n)}return e},gn=function(e){return f(this,Q)[1]?f(this,Q)[1][e]:e},Te=new WeakMap,ao),qi={Stringify:1},To=async(e,t,r,n,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const o=e.callbacks;return o!=null&&o.length?(s?s[0]+=e:s=[e],Promise.all(o.map(a=>a({phase:t,buffer:s,context:n}))).then(a=>Promise.all(a.filter(Boolean).map(c=>To(c,t,!1,n,s))).then(()=>s[0]))):Promise.resolve(e)},Li="text/plain; charset=UTF-8",Jr=(e,t)=>({"Content-Type":e,...t}),Zt,Bt,de,ct,he,V,Jt,lt,ut,Ne,Vt,Kt,be,nt,co,Fi=(co=class{constructor(e,t){x(this,be);x(this,Zt);x(this,Bt);T(this,"env",{});x(this,de);T(this,"finalized",!1);T(this,"error");x(this,ct);x(this,he);x(this,V);x(this,Jt);x(this,lt);x(this,ut);x(this,Ne);x(this,Vt);x(this,Kt);T(this,"render",(...e)=>(f(this,lt)??E(this,lt,t=>this.html(t)),f(this,lt).call(this,...e)));T(this,"setLayout",e=>E(this,Jt,e));T(this,"getLayout",()=>f(this,Jt));T(this,"setRenderer",e=>{E(this,lt,e)});T(this,"header",(e,t,r)=>{this.finalized&&E(this,V,new Response(f(this,V).body,f(this,V)));const n=f(this,V)?f(this,V).headers:f(this,Ne)??E(this,Ne,new Headers);t===void 0?n.delete(e):r!=null&&r.append?n.append(e,t):n.set(e,t)});T(this,"status",e=>{E(this,ct,e)});T(this,"set",(e,t)=>{f(this,de)??E(this,de,new Map),f(this,de).set(e,t)});T(this,"get",e=>f(this,de)?f(this,de).get(e):void 0);T(this,"newResponse",(...e)=>k(this,be,nt).call(this,...e));T(this,"body",(e,t,r)=>k(this,be,nt).call(this,e,t,r));T(this,"text",(e,t,r)=>!f(this,Ne)&&!f(this,ct)&&!t&&!r&&!this.finalized?new Response(e):k(this,be,nt).call(this,e,t,Jr(Li,r)));T(this,"json",(e,t,r)=>k(this,be,nt).call(this,JSON.stringify(e),t,Jr("application/json",r)));T(this,"html",(e,t,r)=>{const n=s=>k(this,be,nt).call(this,s,t,Jr("text/html; charset=UTF-8",r));return typeof e=="object"?To(e,qi.Stringify,!1,{}).then(n):n(e)});T(this,"redirect",(e,t)=>{const r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)});T(this,"notFound",()=>(f(this,ut)??E(this,ut,()=>new Response),f(this,ut).call(this,this)));E(this,Zt,e),t&&(E(this,he,t.executionCtx),this.env=t.env,E(this,ut,t.notFoundHandler),E(this,Kt,t.path),E(this,Vt,t.matchResult))}get req(){return f(this,Bt)??E(this,Bt,new _o(f(this,Zt),f(this,Kt),f(this,Vt))),f(this,Bt)}get event(){if(f(this,he)&&"respondWith"in f(this,he))return f(this,he);throw Error("This context has no FetchEvent")}get executionCtx(){if(f(this,he))return f(this,he);throw Error("This context has no ExecutionContext")}get res(){return f(this,V)||E(this,V,new Response(null,{headers:f(this,Ne)??E(this,Ne,new Headers)}))}set res(e){if(f(this,V)&&e){e=new Response(e.body,e);for(const[t,r]of f(this,V).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const n=f(this,V).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of n)e.headers.append("set-cookie",s)}else e.headers.set(t,r)}E(this,V,e),this.finalized=!0}get var(){return f(this,de)?Object.fromEntries(f(this,de)):{}}},Zt=new WeakMap,Bt=new WeakMap,de=new WeakMap,ct=new WeakMap,he=new WeakMap,V=new WeakMap,Jt=new WeakMap,lt=new WeakMap,ut=new WeakMap,Ne=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,be=new WeakSet,nt=function(e,t,r){const n=f(this,V)?new Headers(f(this,V).headers):f(this,Ne)??new Headers;if(typeof t=="object"&&"headers"in t){const o=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[i,a]of o)i.toLowerCase()==="set-cookie"?n.append(i,a):n.set(i,a)}if(r)for(const[o,i]of Object.entries(r))if(typeof i=="string")n.set(o,i);else{n.delete(o);for(const a of i)n.append(o,a)}const s=typeof t=="number"?t:(t==null?void 0:t.status)??f(this,ct);return new Response(e,{status:s,headers:n})},co),M="ALL",Hi="all",Ui=["get","post","put","delete","options","patch"],bo="Can not add a route since the matcher is already built.",Eo=class extends Error{},Zi="__COMPOSED_HANDLER",Bi=e=>e.text("404 Not Found",404),Vn=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},re,N,wo,ne,je,Sr,xr,dt,Ji=(dt=class{constructor(t={}){x(this,N);T(this,"get");T(this,"post");T(this,"put");T(this,"delete");T(this,"options");T(this,"patch");T(this,"all");T(this,"on");T(this,"use");T(this,"router");T(this,"getPath");T(this,"_basePath","/");x(this,re,"/");T(this,"routes",[]);x(this,ne,Bi);T(this,"errorHandler",Vn);T(this,"onError",t=>(this.errorHandler=t,this));T(this,"notFound",t=>(E(this,ne,t),this));T(this,"fetch",(t,...r)=>k(this,N,xr).call(this,t,r[1],r[0],t.method));T(this,"request",(t,r,n,s)=>t instanceof Request?this.fetch(r?new Request(t,r):t,n,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${rt("/",t)}`,r),n,s)));T(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(k(this,N,xr).call(this,t.request,t,void 0,t.request.method))})});[...Ui,Hi].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?E(this,re,i):k(this,N,je).call(this,o,f(this,re),i),a.forEach(c=>{k(this,N,je).call(this,o,f(this,re),c)}),this)}),this.on=(o,i,...a)=>{for(const c of[i].flat()){E(this,re,c);for(const u of[o].flat())a.map(l=>{k(this,N,je).call(this,u.toUpperCase(),f(this,re),l)})}return this},this.use=(o,...i)=>(typeof o=="string"?E(this,re,o):(E(this,re,"*"),i.unshift(o)),i.forEach(a=>{k(this,N,je).call(this,M,f(this,re),a)}),this);const{strict:n,...s}=t;Object.assign(this,s),this.getPath=n??!0?t.getPath??mo:Ni}route(t,r){const n=this.basePath(t);return r.routes.map(s=>{var i;let o;r.errorHandler===Vn?o=s.handler:(o=async(a,c)=>(await Zn([],r.errorHandler)(a,()=>s.handler(a,c))).res,o[Zi]=s.handler),k(i=n,N,je).call(i,s.method,s.path,o)}),this}basePath(t){const r=k(this,N,wo).call(this);return r._basePath=rt(this._basePath,t),r}mount(t,r,n){let s,o;n&&(typeof n=="function"?o=n:(o=n.optionHandler,n.replaceRequest===!1?s=c=>c:s=n.replaceRequest));const i=o?c=>{const u=o(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};s||(s=(()=>{const c=rt(this._basePath,t),u=c==="/"?0:c.length;return l=>{const h=new URL(l.url);return h.pathname=h.pathname.slice(u)||"/",new Request(h,l)}})());const a=async(c,u)=>{const l=await r(s(c.req.raw),...i(c));if(l)return l;await u()};return k(this,N,je).call(this,M,rt(t,"*"),a),this}},re=new WeakMap,N=new WeakSet,wo=function(){const t=new dt({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,E(t,ne,f(this,ne)),t.routes=this.routes,t},ne=new WeakMap,je=function(t,r,n){t=t.toUpperCase(),r=rt(this._basePath,r);const s={basePath:this._basePath,path:r,method:t,handler:n};this.router.add(t,r,[n,s]),this.routes.push(s)},Sr=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},xr=function(t,r,n,s){if(s==="HEAD")return(async()=>new Response(null,await k(this,N,xr).call(this,t,r,n,"GET")))();const o=this.getPath(t,{env:n}),i=this.router.match(s,o),a=new Fi(t,{path:o,matchResult:i,env:n,executionCtx:r,notFoundHandler:f(this,ne)});if(i[0].length===1){let u;try{u=i[0][0][0][0](a,async()=>{a.res=await f(this,ne).call(this,a)})}catch(l){return k(this,N,Sr).call(this,l,a)}return u instanceof Promise?u.then(l=>l||(a.finalized?a.res:f(this,ne).call(this,a))).catch(l=>k(this,N,Sr).call(this,l,a)):u??f(this,ne).call(this,a)}const c=Zn(i[0],this.errorHandler,f(this,ne));return(async()=>{try{const u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return k(this,N,Sr).call(this,u,a)}})()},dt),So=[];function Vi(e,t){const r=this.buildAllMatchers(),n=((s,o)=>{const i=r[s]||r[M],a=i[2][o];if(a)return a;const c=o.match(i[0]);if(!c)return[[],So];const u=c.indexOf("",1);return[i[1][u],c]});return this.match=n,n(e,t)}var kr="[^/]+",Dt=".*",Gt="(?:|/.*)",st=Symbol(),Ki=new Set(".\\+*[^]$()");function Wi(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Dt||e===Gt?1:t===Dt||t===Gt?-1:e===kr?1:t===kr?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var De,Ge,se,Fe,Yi=(Fe=class{constructor(){x(this,De);x(this,Ge);x(this,se,Object.create(null))}insert(t,r,n,s,o){if(t.length===0){if(f(this,De)!==void 0)throw st;if(o)return;E(this,De,r);return}const[i,...a]=t,c=i==="*"?a.length===0?["","",Dt]:["","",kr]:i==="/*"?["","",Gt]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let u;if(c){const l=c[1];let h=c[2]||kr;if(l&&c[2]&&(h===".*"||(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h))))throw st;if(u=f(this,se)[h],!u){if(Object.keys(f(this,se)).some(p=>p!==Dt&&p!==Gt))throw st;if(o)return;u=f(this,se)[h]=new Fe,l!==""&&E(u,Ge,s.varIndex++)}!o&&l!==""&&n.push([l,f(u,Ge)])}else if(u=f(this,se)[i],!u){if(Object.keys(f(this,se)).some(l=>l.length>1&&l!==Dt&&l!==Gt))throw st;if(o)return;u=f(this,se)[i]=new Fe}u.insert(a,r,n,s,o)}buildRegExpStr(){const r=Object.keys(f(this,se)).sort(Wi).map(n=>{const s=f(this,se)[n];return(typeof f(s,Ge)=="number"?`(${n})@${f(s,Ge)}`:Ki.has(n)?`\\${n}`:n)+s.buildRegExpStr()});return typeof f(this,De)=="number"&&r.unshift(`#${f(this,De)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},De=new WeakMap,Ge=new WeakMap,se=new WeakMap,Fe),jr,Wt,lo,Xi=(lo=class{constructor(){x(this,jr,{varIndex:0});x(this,Wt,new Yi)}insert(e,t,r){const n=[],s=[];for(let i=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{const u=`@\\${i}`;return s[i]=[u,c],i++,a=!0,u}),!a)break}const o=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let i=s.length-1;i>=0;i--){const[a]=s[i];for(let c=o.length-1;c>=0;c--)if(o[c].indexOf(a)!==-1){o[c]=o[c].replace(a,s[i][1]);break}}return f(this,Wt).insert(o,t,n,f(this,jr),r),n}buildRegExp(){let e=f(this,Wt).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,o,i)=>o!==void 0?(r[++t]=Number(o),"$()"):(i!==void 0&&(n[Number(i)]=++t),"")),[new RegExp(`^${e}`),r,n]}},jr=new WeakMap,Wt=new WeakMap,lo),Qi=[/^$/,[],Object.create(null)],Or=Object.create(null);function xo(e){return Or[e]??(Or[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function ea(){Or=Object.create(null)}function ta(e){var u;const t=new Xi,r=[];if(e.length===0)return Qi;const n=e.map(l=>[!/\*|\/:/.test(l[0]),...l]).sort(([l,h],[p,m])=>l?1:p?-1:h.length-m.length),s=Object.create(null);for(let l=0,h=-1,p=n.length;l<p;l++){const[m,v,_]=n[l];m?s[v]=[_.map(([y])=>[y,Object.create(null)]),So]:h++;let g;try{g=t.insert(v,h,m)}catch(y){throw y===st?new Eo(v):y}m||(r[h]=_.map(([y,b])=>{const O=Object.create(null);for(b-=1;b>=0;b--){const[w,S]=g[b];O[w]=S}return[y,O]}))}const[o,i,a]=t.buildRegExp();for(let l=0,h=r.length;l<h;l++)for(let p=0,m=r[l].length;p<m;p++){const v=(u=r[l][p])==null?void 0:u[1];if(!v)continue;const _=Object.keys(v);for(let g=0,y=_.length;g<y;g++)v[_[g]]=a[v[_[g]]]}const c=[];for(const l in i)c[l]=r[i[l]];return[o,c,s]}function Be(e,t){if(e){for(const r of Object.keys(e).sort((n,s)=>s.length-n.length))if(xo(r).test(t))return[...e[r]]}}var Ee,we,zr,Oo,uo,ra=(uo=class{constructor(){x(this,zr);T(this,"name","RegExpRouter");x(this,Ee);x(this,we);T(this,"match",Vi);E(this,Ee,{[M]:Object.create(null)}),E(this,we,{[M]:Object.create(null)})}add(e,t,r){var a;const n=f(this,Ee),s=f(this,we);if(!n||!s)throw new Error(bo);n[e]||[n,s].forEach(c=>{c[e]=Object.create(null),Object.keys(c[M]).forEach(u=>{c[e][u]=[...c[M][u]]})}),t==="/*"&&(t="*");const o=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const c=xo(t);e===M?Object.keys(n).forEach(u=>{var l;(l=n[u])[t]||(l[t]=Be(n[u],t)||Be(n[M],t)||[])}):(a=n[e])[t]||(a[t]=Be(n[e],t)||Be(n[M],t)||[]),Object.keys(n).forEach(u=>{(e===M||e===u)&&Object.keys(n[u]).forEach(l=>{c.test(l)&&n[u][l].push([r,o])})}),Object.keys(s).forEach(u=>{(e===M||e===u)&&Object.keys(s[u]).forEach(l=>c.test(l)&&s[u][l].push([r,o]))});return}const i=vo(t)||[t];for(let c=0,u=i.length;c<u;c++){const l=i[c];Object.keys(s).forEach(h=>{var p;(e===M||e===h)&&((p=s[h])[l]||(p[l]=[...Be(n[h],l)||Be(n[M],l)||[]]),s[h][l].push([r,o-u+c+1]))})}}buildAllMatchers(){const e=Object.create(null);return Object.keys(f(this,we)).concat(Object.keys(f(this,Ee))).forEach(t=>{e[t]||(e[t]=k(this,zr,Oo).call(this,t))}),E(this,Ee,E(this,we,void 0)),ea(),e}},Ee=new WeakMap,we=new WeakMap,zr=new WeakSet,Oo=function(e){const t=[];let r=e===M;return[f(this,Ee),f(this,we)].forEach(n=>{const s=n[e]?Object.keys(n[e]).map(o=>[o,n[e][o]]):[];s.length!==0?(r||(r=!0),t.push(...s)):e!==M&&t.push(...Object.keys(n[M]).map(o=>[o,n[M][o]]))}),r?ta(t):null},uo),Se,pe,ho,na=(ho=class{constructor(e){T(this,"name","SmartRouter");x(this,Se,[]);x(this,pe,[]);E(this,Se,e.routers)}add(e,t,r){if(!f(this,pe))throw new Error(bo);f(this,pe).push([e,t,r])}match(e,t){if(!f(this,pe))throw new Error("Fatal error");const r=f(this,Se),n=f(this,pe),s=r.length;let o=0,i;for(;o<s;o++){const a=r[o];try{for(let c=0,u=n.length;c<u;c++)a.add(...n[c]);i=a.match(e,t)}catch(c){if(c instanceof Eo)continue;throw c}this.match=a.match.bind(a),E(this,Se,[a]),E(this,pe,void 0);break}if(o===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,i}get activeRouter(){if(f(this,pe)||f(this,Se).length!==1)throw new Error("No active router has been determined yet.");return f(this,Se)[0]}},Se=new WeakMap,pe=new WeakMap,ho),mt=Object.create(null),xe,Z,qe,ht,L,fe,ze,pt,sa=(pt=class{constructor(t,r,n){x(this,fe);x(this,xe);x(this,Z);x(this,qe);x(this,ht,0);x(this,L,mt);if(E(this,Z,n||Object.create(null)),E(this,xe,[]),t&&r){const s=Object.create(null);s[t]={handler:r,possibleKeys:[],score:0},E(this,xe,[s])}E(this,qe,[])}insert(t,r,n){E(this,ht,++Un(this,ht)._);let s=this;const o=$i(r),i=[];for(let a=0,c=o.length;a<c;a++){const u=o[a],l=o[a+1],h=zi(u,l),p=Array.isArray(h)?h[0]:u;if(p in f(s,Z)){s=f(s,Z)[p],h&&i.push(h[1]);continue}f(s,Z)[p]=new pt,h&&(f(s,qe).push(h),i.push(h[1])),s=f(s,Z)[p]}return f(s,xe).push({[t]:{handler:n,possibleKeys:i.filter((a,c,u)=>u.indexOf(a)===c),score:f(this,ht)}}),s}search(t,r){var c;const n=[];E(this,L,mt);let o=[this];const i=fo(r),a=[];for(let u=0,l=i.length;u<l;u++){const h=i[u],p=u===l-1,m=[];for(let v=0,_=o.length;v<_;v++){const g=o[v],y=f(g,Z)[h];y&&(E(y,L,f(g,L)),p?(f(y,Z)["*"]&&n.push(...k(this,fe,ze).call(this,f(y,Z)["*"],t,f(g,L))),n.push(...k(this,fe,ze).call(this,y,t,f(g,L)))):m.push(y));for(let b=0,O=f(g,qe).length;b<O;b++){const w=f(g,qe)[b],S=f(g,L)===mt?{}:{...f(g,L)};if(w==="*"){const ie=f(g,Z)["*"];ie&&(n.push(...k(this,fe,ze).call(this,ie,t,f(g,L))),E(ie,L,S),m.push(ie));continue}const[j,z,H]=w;if(!h&&!(H instanceof RegExp))continue;const U=f(g,Z)[j],Y=i.slice(u).join("/");if(H instanceof RegExp){const ie=H.exec(Y);if(ie){if(S[z]=ie[0],n.push(...k(this,fe,ze).call(this,U,t,f(g,L),S)),Object.keys(f(U,Z)).length){E(U,L,S);const Ur=((c=ie[0].match(/\//))==null?void 0:c.length)??0;(a[Ur]||(a[Ur]=[])).push(U)}continue}}(H===!0||H.test(h))&&(S[z]=h,p?(n.push(...k(this,fe,ze).call(this,U,t,S,f(g,L))),f(U,Z)["*"]&&n.push(...k(this,fe,ze).call(this,f(U,Z)["*"],t,S,f(g,L)))):(E(U,L,S),m.push(U)))}}o=m.concat(a.shift()??[])}return n.length>1&&n.sort((u,l)=>u.score-l.score),[n.map(({handler:u,params:l})=>[u,l])]}},xe=new WeakMap,Z=new WeakMap,qe=new WeakMap,ht=new WeakMap,L=new WeakMap,fe=new WeakSet,ze=function(t,r,n,s){const o=[];for(let i=0,a=f(t,xe).length;i<a;i++){const c=f(t,xe)[i],u=c[r]||c[M],l={};if(u!==void 0&&(u.params=Object.create(null),o.push(u),n!==mt||s&&s!==mt))for(let h=0,p=u.possibleKeys.length;h<p;h++){const m=u.possibleKeys[h],v=l[u.score];u.params[m]=s!=null&&s[m]&&!v?s[m]:n[m]??(s==null?void 0:s[m]),l[u.score]=!0}}return o},pt),Le,po,oa=(po=class{constructor(){T(this,"name","TrieRouter");x(this,Le);E(this,Le,new sa)}add(e,t,r){const n=vo(t);if(n){for(let s=0,o=n.length;s<o;s++)f(this,Le).insert(e,n[s],r);return}f(this,Le).insert(e,t,r)}match(e,t){return f(this,Le).search(e,t)}},Le=new WeakMap,po),ft=class extends Ji{constructor(e={}){super(e),this.router=e.router??new na({routers:[new ra,new oa]})}},ia=e=>{const r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},n=(o=>typeof o=="string"?o==="*"?()=>o:i=>o===i?i:null:typeof o=="function"?o:i=>o.includes(i)?i:null)(r.origin),s=(o=>typeof o=="function"?o:Array.isArray(o)?()=>o:()=>[])(r.allowMethods);return async function(i,a){var l;function c(h,p){i.res.headers.set(h,p)}const u=await n(i.req.header("origin")||"",i);if(u&&c("Access-Control-Allow-Origin",u),r.credentials&&c("Access-Control-Allow-Credentials","true"),(l=r.exposeHeaders)!=null&&l.length&&c("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),i.req.method==="OPTIONS"){r.origin!=="*"&&c("Vary","Origin"),r.maxAge!=null&&c("Access-Control-Max-Age",r.maxAge.toString());const h=await s(i.req.header("origin")||"",i);h.length&&c("Access-Control-Allow-Methods",h.join(","));let p=r.allowHeaders;if(!(p!=null&&p.length)){const m=i.req.header("Access-Control-Request-Headers");m&&(p=m.split(/\s*,\s*/))}return p!=null&&p.length&&(c("Access-Control-Allow-Headers",p.join(",")),i.res.headers.append("Vary","Access-Control-Request-Headers")),i.res.headers.delete("Content-Length"),i.res.headers.delete("Content-Type"),new Response(null,{headers:i.res.headers,status:204,statusText:"No Content"})}await a(),r.origin!=="*"&&i.header("Vary","Origin",{append:!0})}},aa=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i,Kn=(e,t=la)=>{const r=/\.([a-zA-Z0-9]+?)$/,n=e.match(r);if(!n)return;let s=t[n[1]];return s&&s.startsWith("text")&&(s+="; charset=utf-8"),s},ca={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},la=ca,ua=(...e)=>{let t=e.filter(s=>s!=="").join("/");t=t.replace(new RegExp("(?<=\\/)\\/+","g"),"");const r=t.split("/"),n=[];for(const s of r)s===".."&&n.length>0&&n.at(-1)!==".."?n.pop():s!=="."&&n.push(s);return n.join("/")||"."},ko={br:".br",zstd:".zst",gzip:".gz"},da=Object.keys(ko),ha="index.html",pa=e=>{const t=e.root??"./",r=e.path,n=e.join??ua;return async(s,o)=>{var l,h,p,m;if(s.finalized)return o();let i;if(e.path)i=e.path;else try{if(i=decodeURIComponent(s.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(i))throw new Error}catch{return await((l=e.onNotFound)==null?void 0:l.call(e,s.req.path,s)),o()}let a=n(t,!r&&e.rewriteRequestPath?e.rewriteRequestPath(i):i);e.isDir&&await e.isDir(a)&&(a=n(a,ha));const c=e.getContent;let u=await c(a,s);if(u instanceof Response)return s.newResponse(u.body,u);if(u){const v=e.mimes&&Kn(a,e.mimes)||Kn(a);if(s.header("Content-Type",v||"application/octet-stream"),e.precompressed&&(!v||aa.test(v))){const _=new Set((h=s.req.header("Accept-Encoding"))==null?void 0:h.split(",").map(g=>g.trim()));for(const g of da){if(!_.has(g))continue;const y=await c(a+ko[g],s);if(y){u=y,s.header("Content-Encoding",g),s.header("Vary","Accept-Encoding",{append:!0});break}}}return await((p=e.onFound)==null?void 0:p.call(e,a,s)),s.body(u)}await((m=e.onNotFound)==null?void 0:m.call(e,a,s)),await o()}},fa=async(e,t)=>{let r;t&&t.manifest?typeof t.manifest=="string"?r=JSON.parse(t.manifest):r=t.manifest:typeof __STATIC_CONTENT_MANIFEST=="string"?r=JSON.parse(__STATIC_CONTENT_MANIFEST):r=__STATIC_CONTENT_MANIFEST;let n;t&&t.namespace?n=t.namespace:n=__STATIC_CONTENT;const s=r[e];if(!s)return null;const o=await n.get(s,{type:"stream"});return o||null},ma=e=>async function(r,n){return pa({...e,getContent:async o=>fa(o,{manifest:e.manifest,namespace:e.namespace?e.namespace:r.env?r.env.__STATIC_CONTENT:void 0})})(r,n)},va=e=>ma(e),ga=/^[\w!#$%&'*.^`|~+-]+$/,_a=/^[ !#-:<-[\]-~]*$/,ya=(e,t)=>{const r=e.trim().split(";"),n={};for(let s of r){s=s.trim();const o=s.indexOf("=");if(o===-1)continue;const i=s.substring(0,o).trim();if(!ga.test(i))continue;let a=s.substring(o+1).trim();a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),_a.test(a)&&(n[i]=a.indexOf("%")!==-1?Mr(a,xn):a)}return n},Pa=(e,t,r)=>{const n=e.req.raw.headers.get("Cookie");return n?ya(n):{}},Ta=(e,t)=>new Response(e,{headers:{"Content-Type":t}}).formData(),ba=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,Ea=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,wa=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,Sa=(e,t)=>async(r,n)=>{let s={};const o=r.req.header("Content-Type");switch(e){case"json":if(!o||!ba.test(o))break;try{s=await r.req.json()}catch{const a="Malformed JSON in request body";throw new Bn(400,{message:a})}break;case"form":{if(!o||!(Ea.test(o)||wa.test(o)))break;let a;if(r.req.bodyCache.formData)a=await r.req.bodyCache.formData;else try{const u=await r.req.arrayBuffer();a=await Ta(u,o),r.req.bodyCache.formData=a}catch(u){let l="Malformed FormData request.";throw l+=u instanceof Error?` ${u.message}`:` ${String(u)}`,new Bn(400,{message:l})}const c={};a.forEach((u,l)=>{l.endsWith("[]")?(c[l]??(c[l]=[])).push(u):Array.isArray(c[l])?c[l].push(u):l in c?c[l]=[c[l],u]:c[l]=u}),s=c;break}case"query":s=Object.fromEntries(Object.entries(r.req.queries()).map(([a,c])=>c.length===1?[a,c[0]]:[a,c]));break;case"param":s=r.req.param();break;case"header":s=r.req.header();break;case"cookie":s=Pa(r);break}const i=await t(s,r);return i instanceof Response?i:(r.req.addValidatedData(e,i),await n())};function xa(e,t,r,n){return Sa(e,async(s,o)=>{let i=s;if(e==="header"&&"_def"in t||e==="header"&&"_zod"in t){const c=Object.keys("in"in t?t.in.shape:t.shape),u=Object.fromEntries(c.map(l=>[l.toLowerCase(),l]));i=Object.fromEntries(Object.entries(s).map(([l,h])=>[u[l]||l,h]))}const a=n&&n.validationFunction?await n.validationFunction(t,i):await t.safeParseAsync(i);if(r){const c=await r({data:i,...a,target:e},o);if(c){if(c instanceof Response)return c;if("response"in c)return c.response}}return a.success?a.data:o.json(a,400)})}const Oa=xa;function P(e,t,r){function n(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:i,traits:new Set},enumerable:!1}),a._zod.traits.has(e))return;a._zod.traits.add(e),t(a,c);const u=i.prototype,l=Object.keys(u);for(let h=0;h<l.length;h++){const p=l[h];p in a||(a[p]=u[p].bind(a))}}const s=(r==null?void 0:r.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function i(a){var c;const u=r!=null&&r.Parent?new o:this;n(u,a),(c=u._zod).deferred??(c.deferred=[]);for(const l of u._zod.deferred)l();return u}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var c,u;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(u=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class it extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ao extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Ro={};function He(e){return Ro}function Co(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function _n(e,t){return typeof t=="bigint"?t.toString():t}function On(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function kn(e){return e==null}function An(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function ka(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const c=n.match(/\d?e-(\d?)/);c!=null&&c[1]&&(s=Number.parseInt(c[1]))}const o=r>s?r:s,i=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return i%a/10**o}const Wn=Symbol("evaluating");function A(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==Wn)return n===void 0&&(n=Wn,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Ze(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Oe(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function Yn(e){return JSON.stringify(e)}const $o="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ar(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Aa=On(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ft(e){if(Ar(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(Ar(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Io(e){return Ft(e)?{...e}:Array.isArray(e)?[...e]:e}const Ra=new Set(["string","number","symbol"]);function Ca(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ke(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function I(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function $a(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Ia={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ja(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=Oe(e._zod.def,{get shape(){const i={};for(const a in t){if(!(a in r.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(i[a]=r.shape[a])}return Ze(this,"shape",i),i},checks:[]});return ke(e,o)}function za(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=Oe(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const a in t){if(!(a in r.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete i[a]}return Ze(this,"shape",i),i},checks:[]});return ke(e,o)}function Ma(e,t){if(!Ft(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const o=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(o,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Oe(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return Ze(this,"shape",o),o}});return ke(e,s)}function Na(e,t){if(!Ft(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=Oe(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return Ze(this,"shape",n),n}});return ke(e,r)}function Da(e,t){const r=Oe(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Ze(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return ke(e,r)}function Ga(e,t,r){const s=t._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=Oe(t._zod.def,{get shape(){const a=t._zod.def.shape,c={...a};if(r)for(const u in r){if(!(u in a))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(c[u]=e?new e({type:"optional",innerType:a[u]}):a[u])}else for(const u in a)c[u]=e?new e({type:"optional",innerType:a[u]}):a[u];return Ze(this,"shape",c),c},checks:[]});return ke(t,i)}function qa(e,t,r){const n=Oe(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)o[i]=new e({type:"nonoptional",innerType:s[i]});return Ze(this,"shape",o),o}});return ke(t,n)}function ot(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function jo(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Qt(e){return typeof e=="string"?e:e==null?void 0:e.message}function Ue(e,t,r){var s,o,i,a,c,u;const n={...e,path:e.path??[]};if(!e.message){const l=Qt((i=(o=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??Qt((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??Qt((c=r.customError)==null?void 0:c.call(r,e))??Qt((u=r.localeError)==null?void 0:u.call(r,e))??"Invalid input";n.message=l}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function Rn(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ht(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const zo=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,_n,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Mo=P("$ZodError",zo),No=P("$ZodError",zo,{Parent:Error});function La(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function Fa(e,t=r=>r.message){const r={_errors:[]},n=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(i=>n({issues:i}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let i=r,a=0;for(;a<o.path.length;){const c=o.path[a];a===o.path.length-1?(i[c]=i[c]||{_errors:[]},i[c]._errors.push(t(o))):i[c]=i[c]||{_errors:[]},i=i[c],a++}}};return n(e),r}const Cn=e=>(t,r,n,s)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new it;if(i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(c=>Ue(c,o,He())));throw $o(a,s==null?void 0:s.callee),a}return i.value},$n=e=>async(t,r,n,s)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(c=>Ue(c,o,He())));throw $o(a,s==null?void 0:s.callee),a}return i.value},Nr=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new it;return o.issues.length?{success:!1,error:new(e??Mo)(o.issues.map(i=>Ue(i,s,He())))}:{success:!0,data:o.value}},Ha=Nr(No),Dr=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>Ue(i,s,He())))}:{success:!0,data:o.value}},Ua=Dr(No),Za=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Cn(e)(t,r,s)},Ba=e=>(t,r,n)=>Cn(e)(t,r,n),Ja=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return $n(e)(t,r,s)},Va=e=>async(t,r,n)=>$n(e)(t,r,n),Ka=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Nr(e)(t,r,s)},Wa=e=>(t,r,n)=>Nr(e)(t,r,n),Ya=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Dr(e)(t,r,s)},Xa=e=>async(t,r,n)=>Dr(e)(t,r,n),Qa=/^-?\d+$/,ec=/^-?\d+(?:\.\d+)?$/,le=P("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Do={number:"number",bigint:"bigint",object:"date"},Go=P("$ZodCheckLessThan",(e,t)=>{le.init(e,t);const r=Do[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),qo=P("$ZodCheckGreaterThan",(e,t)=>{le.init(e,t);const r=Do[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),tc=P("$ZodCheckMultipleOf",(e,t)=>{le.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):ka(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),rc=P("$ZodCheckNumberFormat",(e,t)=>{var i;le.init(e,t),t.format=t.format||"float64";const r=(i=t.format)==null?void 0:i.includes("int"),n=r?"int":"number",[s,o]=Ia[t.format];e._zod.onattach.push(a=>{const c=a._zod.bag;c.format=t.format,c.minimum=s,c.maximum=o,r&&(c.pattern=Qa)}),e._zod.check=a=>{const c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort});return}}c<s&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),c>o&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),nc=P("$ZodCheckMaxLength",(e,t)=>{var r;le.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!kn(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=Rn(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),sc=P("$ZodCheckMinLength",(e,t)=>{var r;le.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!kn(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=Rn(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),oc=P("$ZodCheckLengthEquals",(e,t)=>{var r;le.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!kn(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,o=s.length;if(o===t.length)return;const i=Rn(s),a=o>t.length;n.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),ic=P("$ZodCheckOverwrite",(e,t)=>{le.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class ac{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),s=Math.min(...n.map(i=>i.length-i.trimStart().length)),o=n.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...r,s.join(`
`))}}const cc={major:4,minor:3,patch:6},D=P("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=cc;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const i of o._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const o=(a,c,u)=>{let l=ot(a),h;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(a))continue}else if(l)continue;const m=a.issues.length,v=p._zod.check(a);if(v instanceof Promise&&(u==null?void 0:u.async)===!1)throw new it;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,a.issues.length!==m&&(l||(l=ot(a,m)))});else{if(a.issues.length===m)continue;l||(l=ot(a,m))}}return h?h.then(()=>a):a},i=(a,c,u)=>{if(ot(a))return a.aborted=!0,a;const l=o(c,n,u);if(l instanceof Promise){if(u.async===!1)throw new it;return l.then(h=>e._zod.parse(h,u))}return e._zod.parse(l,u)};e._zod.run=(a,c)=>{if(c.skipChecks)return e._zod.parse(a,c);if(c.direction==="backward"){const l=e._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return l instanceof Promise?l.then(h=>i(h,a,c)):i(l,a,c)}const u=e._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new it;return u.then(l=>o(l,n,c))}return o(u,n,c)}}A(e,"~standard",()=>({validate:o=>{var i;try{const a=Ha(e,o);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return Ua(e,o).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}))}),Lo=P("$ZodNumber",(e,t)=>{D.init(e,t),e._zod.pattern=e._zod.bag.pattern??ec,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),r}}),lc=P("$ZodNumberFormat",(e,t)=>{rc.init(e,t),Lo.init(e,t)}),uc=P("$ZodUnknown",(e,t)=>{D.init(e,t),e._zod.parse=r=>r}),dc=P("$ZodNever",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Xn(e,t,r){e.issues.length&&t.issues.push(...jo(r,e.issues)),t.value[r]=e.value}const hc=P("$ZodArray",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let i=0;i<s.length;i++){const a=s[i],c=t.element._zod.run({value:a,issues:[]},n);c instanceof Promise?o.push(c.then(u=>Xn(u,r,i))):Xn(c,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function Rr(e,t,r,n,s){if(e.issues.length){if(s&&!(r in n))return;t.issues.push(...jo(r,e.issues))}e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function Fo(e){var n,s,o,i;const t=Object.keys(e.shape);for(const a of t)if(!((i=(o=(s=(n=e.shape)==null?void 0:n[a])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&i.has("$ZodType")))throw new Error(`Invalid element at key "${a}": expected a Zod schema`);const r=$a(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function Ho(e,t,r,n,s,o){const i=[],a=s.keySet,c=s.catchall._zod,u=c.def.type,l=c.optout==="optional";for(const h in t){if(a.has(h))continue;if(u==="never"){i.push(h);continue}const p=c.run({value:t[h],issues:[]},n);p instanceof Promise?e.push(p.then(m=>Rr(m,r,h,t,l))):Rr(p,r,h,t,l)}return i.length&&r.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const pc=P("$ZodObject",(e,t)=>{D.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const a=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...a};return Object.defineProperty(t,"shape",{value:c}),c}})}const n=On(()=>Fo(t));A(e._zod,"propValues",()=>{const a=t.shape,c={};for(const u in a){const l=a[u]._zod;if(l.values){c[u]??(c[u]=new Set);for(const h of l.values)c[u].add(h)}}return c});const s=Ar,o=t.catchall;let i;e._zod.parse=(a,c)=>{i??(i=n.value);const u=a.value;if(!s(u))return a.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),a;a.value={};const l=[],h=i.shape;for(const p of i.keys){const m=h[p],v=m._zod.optout==="optional",_=m._zod.run({value:u[p],issues:[]},c);_ instanceof Promise?l.push(_.then(g=>Rr(g,a,p,u,v))):Rr(_,a,p,u,v)}return o?Ho(l,u,a,c,n.value,e):l.length?Promise.all(l).then(()=>a):a}}),fc=P("$ZodObjectJIT",(e,t)=>{pc.init(e,t);const r=e._zod.parse,n=On(()=>Fo(t)),s=p=>{var O;const m=new ac(["shape","payload","ctx"]),v=n.value,_=w=>{const S=Yn(w);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};m.write("const input = payload.value;");const g=Object.create(null);let y=0;for(const w of v.keys)g[w]=`key_${y++}`;m.write("const newResult = {};");for(const w of v.keys){const S=g[w],j=Yn(w),z=p[w],H=((O=z==null?void 0:z._zod)==null?void 0:O.optout)==="optional";m.write(`const ${S} = ${_(w)};`),H?m.write(`
        if (${S}.issues.length) {
          if (${j} in input) {
            payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${j}, ...iss.path] : [${j}]
            })));
          }
        }
        
        if (${S}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${S}.value;
        }
        
      `):m.write(`
        if (${S}.issues.length) {
          payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${S}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${S}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const b=m.compile();return(w,S)=>b(p,w,S)};let o;const i=Ar,a=!Ro.jitless,u=a&&Aa.value,l=t.catchall;let h;e._zod.parse=(p,m)=>{h??(h=n.value);const v=p.value;return i(v)?a&&u&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(o||(o=s(t.shape)),p=o(p,m),l?Ho([],v,p,m,h,e):p):r(p,m):(p.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),p)}});function Qn(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!ot(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>Ue(i,n,He())))}),t)}const mc=P("$ZodUnion",(e,t)=>{D.init(e,t),A(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),A(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),A(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),A(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>An(o.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return n(s,o);let i=!1;const a=[];for(const c of t.options){const u=c._zod.run({value:s.value,issues:[]},o);if(u instanceof Promise)a.push(u),i=!0;else{if(u.issues.length===0)return u;a.push(u)}}return i?Promise.all(a).then(c=>Qn(c,s,e,o)):Qn(a,s,e,o)}}),vc=P("$ZodIntersection",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},n),i=t.right._zod.run({value:s,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([c,u])=>es(r,c,u)):es(r,o,i)}});function yn(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ft(e)&&Ft(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of n){const i=yn(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s[o]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],o=t[n],i=yn(s,o);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function es(e,t,r){const n=new Map;let s;for(const a of t.issues)if(a.code==="unrecognized_keys"){s??(s=a);for(const c of a.keys)n.has(c)||n.set(c,{}),n.get(c).l=!0}else e.issues.push(a);for(const a of r.issues)if(a.code==="unrecognized_keys")for(const c of a.keys)n.has(c)||n.set(c,{}),n.get(c).r=!0;else e.issues.push(a);const o=[...n].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(o.length&&s&&e.issues.push({...s,keys:o}),ot(e))return e;const i=yn(t.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const gc=P("$ZodEnum",(e,t)=>{D.init(e,t);const r=Co(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Ra.has(typeof s)).map(s=>typeof s=="string"?Ca(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const i=s.value;return n.has(i)||s.issues.push({code:"invalid_value",values:r,input:i,inst:e}),s}}),_c=P("$ZodTransform",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Ao(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new it;return r.value=s,r}});function ts(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Uo=P("$ZodOptional",(e,t)=>{D.init(e,t),e._zod.optin="optional",e._zod.optout="optional",A(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),A(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${An(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>ts(o,r.value)):ts(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),yc=P("$ZodExactOptional",(e,t)=>{Uo.init(e,t),A(e._zod,"values",()=>t.innerType._zod.values),A(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,n)=>t.innerType._zod.run(r,n)}),Pc=P("$ZodNullable",(e,t)=>{D.init(e,t),A(e._zod,"optin",()=>t.innerType._zod.optin),A(e._zod,"optout",()=>t.innerType._zod.optout),A(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${An(r.source)}|null)$`):void 0}),A(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Tc=P("$ZodDefault",(e,t)=>{D.init(e,t),e._zod.optin="optional",A(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>rs(o,t)):rs(s,t)}});function rs(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const bc=P("$ZodPrefault",(e,t)=>{D.init(e,t),e._zod.optin="optional",A(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Ec=P("$ZodNonOptional",(e,t)=>{D.init(e,t),A(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>ns(o,e)):ns(s,e)}});function ns(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const wc=P("$ZodCatch",(e,t)=>{D.init(e,t),A(e._zod,"optin",()=>t.innerType._zod.optin),A(e._zod,"optout",()=>t.innerType._zod.optout),A(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>Ue(i,n,He()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>Ue(o,n,He()))},input:r.value}),r.issues=[]),r)}}),Sc=P("$ZodPipe",(e,t)=>{D.init(e,t),A(e._zod,"values",()=>t.in._zod.values),A(e._zod,"optin",()=>t.in._zod.optin),A(e._zod,"optout",()=>t.out._zod.optout),A(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const o=t.out._zod.run(r,n);return o instanceof Promise?o.then(i=>er(i,t.in,n)):er(o,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(o=>er(o,t.out,n)):er(s,t.out,n)}});function er(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const xc=P("$ZodReadonly",(e,t)=>{D.init(e,t),A(e._zod,"propValues",()=>t.innerType._zod.propValues),A(e._zod,"values",()=>t.innerType._zod.values),A(e._zod,"optin",()=>{var r,n;return(n=(r=t.innerType)==null?void 0:r._zod)==null?void 0:n.optin}),A(e._zod,"optout",()=>{var r,n;return(n=(r=t.innerType)==null?void 0:r._zod)==null?void 0:n.optout}),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(ss):ss(s)}});function ss(e){return e.value=Object.freeze(e.value),e}const Oc=P("$ZodCustom",(e,t)=>{le.init(e,t),D.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(o=>os(o,r,n,e));os(s,r,n,e)}});function os(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Ht(s))}}var is;class kc{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];return this._map.set(t,n),n&&typeof n=="object"&&"id"in n&&this._idmap.set(n.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Ac(){return new kc}(is=globalThis).__zod_globalRegistry??(is.__zod_globalRegistry=Ac());const Nt=globalThis.__zod_globalRegistry;function Rc(e,t){return new e({type:"number",checks:[],...I(t)})}function Cc(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...I(t)})}function $c(e){return new e({type:"unknown"})}function Ic(e,t){return new e({type:"never",...I(t)})}function as(e,t){return new Go({check:"less_than",...I(t),value:e,inclusive:!1})}function Vr(e,t){return new Go({check:"less_than",...I(t),value:e,inclusive:!0})}function cs(e,t){return new qo({check:"greater_than",...I(t),value:e,inclusive:!1})}function Kr(e,t){return new qo({check:"greater_than",...I(t),value:e,inclusive:!0})}function ls(e,t){return new tc({check:"multiple_of",...I(t),value:e})}function jc(e,t){return new nc({check:"max_length",...I(t),maximum:e})}function us(e,t){return new sc({check:"min_length",...I(t),minimum:e})}function zc(e,t){return new oc({check:"length_equals",...I(t),length:e})}function Mc(e){return new ic({check:"overwrite",tx:e})}function Nc(e,t,r){return new e({type:"array",element:t,...I(r)})}function Dc(e,t,r){return new e({type:"custom",check:"custom",fn:t,...I(r)})}function Gc(e){const t=qc(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Ht(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Ht(s))}},e(r.value,r)));return t}function qc(e,t){const r=new le({check:"custom",...I(t)});return r._zod.check=e,r}function Zo(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??Nt,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function F(e,t,r={path:[],schemaPath:[]}){var l,h;var n;const s=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;const i={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,i);const a=(h=(l=e._zod).toJSONSchema)==null?void 0:h.call(l);if(a)i.schema=a;else{const p={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,p);else{const v=i.schema,_=t.processors[s.type];if(!_)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);_(e,t,v,p)}const m=e._zod.parent;m&&(i.ref||(i.ref=m),F(m,t,p),t.seen.get(m).isParent=!0)}const c=t.metadataRegistry.get(e);return c&&Object.assign(i.schema,c),t.io==="input"&&J(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((n=i.schema).default??(n.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function Bo(e,t){var i,a,c,u;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=new Map;for(const l of e.seen.entries()){const h=(i=e.metadataRegistry.get(l[0]))==null?void 0:i.id;if(h){const p=n.get(h);if(p&&p!==l[0])throw new Error(`Duplicate schema id "${h}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(h,l[0])}}const s=l=>{var _;const h=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const g=(_=e.external.registry.get(l[0]))==null?void 0:_.id,y=e.external.uri??(O=>O);if(g)return{ref:y(g)};const b=l[1].defId??l[1].schema.id??`schema${e.counter++}`;return l[1].defId=b,{defId:b,ref:`${y("__shared")}#/${h}/${b}`}}if(l[1]===r)return{ref:"#"};const m=`#/${h}/`,v=l[1].schema.id??`__schema${e.counter++}`;return{defId:v,ref:m+v}},o=l=>{if(l[1].schema.$ref)return;const h=l[1],{ref:p,defId:m}=s(l);h.def={...h.schema},m&&(h.defId=m);const v=h.schema;for(const _ in v)delete v[_];v.$ref=p};if(e.cycles==="throw")for(const l of e.seen.entries()){const h=l[1];if(h.cycle)throw new Error(`Cycle detected: #/${(a=h.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of e.seen.entries()){const h=l[1];if(t===l[0]){o(l);continue}if(e.external){const m=(c=e.external.registry.get(l[0]))==null?void 0:c.id;if(t!==l[0]&&m){o(l);continue}}if((u=e.metadataRegistry.get(l[0]))==null?void 0:u.id){o(l);continue}if(h.cycle){o(l);continue}if(h.count>1&&e.reused==="ref"){o(l);continue}}}function Jo(e,t){var i,a,c;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=u=>{const l=e.seen.get(u);if(l.ref===null)return;const h=l.def??l.schema,p={...h},m=l.ref;if(l.ref=null,m){n(m);const _=e.seen.get(m),g=_.schema;if(g.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(g)):Object.assign(h,g),Object.assign(h,p),u._zod.parent===m)for(const b in h)b==="$ref"||b==="allOf"||b in p||delete h[b];if(g.$ref&&_.def)for(const b in h)b==="$ref"||b==="allOf"||b in _.def&&JSON.stringify(h[b])===JSON.stringify(_.def[b])&&delete h[b]}const v=u._zod.parent;if(v&&v!==m){n(v);const _=e.seen.get(v);if(_!=null&&_.schema.$ref&&(h.$ref=_.schema.$ref,_.def))for(const g in h)g==="$ref"||g==="allOf"||g in _.def&&JSON.stringify(h[g])===JSON.stringify(_.def[g])&&delete h[g]}e.override({zodSchema:u,jsonSchema:h,path:l.path??[]})};for(const u of[...e.seen.entries()].reverse())n(u[0]);const s={};if(e.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":e.target,(i=e.external)!=null&&i.uri){const u=(a=e.external.registry.get(t))==null?void 0:a.id;if(!u)throw new Error("Schema is missing an `id` property");s.$id=e.external.uri(u)}Object.assign(s,r.def??r.schema);const o=((c=e.external)==null?void 0:c.defs)??{};for(const u of e.seen.entries()){const l=u[1];l.def&&l.defId&&(o[l.defId]=l.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const u=JSON.parse(JSON.stringify(s));return Object.defineProperty(u,"~standard",{value:{...t["~standard"],jsonSchema:{input:Cr(t,"input",e.processors),output:Cr(t,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function J(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return J(n.element,r);if(n.type==="set")return J(n.valueType,r);if(n.type==="lazy")return J(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return J(n.innerType,r);if(n.type==="intersection")return J(n.left,r)||J(n.right,r);if(n.type==="record"||n.type==="map")return J(n.keyType,r)||J(n.valueType,r);if(n.type==="pipe")return J(n.in,r)||J(n.out,r);if(n.type==="object"){for(const s in n.shape)if(J(n.shape[s],r))return!0;return!1}if(n.type==="union"){for(const s of n.options)if(J(s,r))return!0;return!1}if(n.type==="tuple"){for(const s of n.items)if(J(s,r))return!0;return!!(n.rest&&J(n.rest,r))}return!1}const Lc=(e,t={})=>r=>{const n=Zo({...r,processors:t});return F(e,n),Bo(n,e),Jo(n,e)},Cr=(e,t,r={})=>n=>{const{libraryOptions:s,target:o}=n??{},i=Zo({...s??{},target:o,io:t,processors:r});return F(e,i),Bo(i,e),Jo(i,e)},Fc=(e,t,r,n)=>{const s=r,{minimum:o,maximum:i,format:a,multipleOf:c,exclusiveMaximum:u,exclusiveMinimum:l}=e._zod.bag;typeof a=="string"&&a.includes("int")?s.type="integer":s.type="number",typeof l=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.minimum=l,s.exclusiveMinimum=!0):s.exclusiveMinimum=l),typeof o=="number"&&(s.minimum=o,typeof l=="number"&&t.target!=="draft-04"&&(l>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof u=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.maximum=u,s.exclusiveMaximum=!0):s.exclusiveMaximum=u),typeof i=="number"&&(s.maximum=i,typeof u=="number"&&t.target!=="draft-04"&&(u<=i?delete s.maximum:delete s.exclusiveMaximum)),typeof c=="number"&&(s.multipleOf=c)},Hc=(e,t,r,n)=>{r.not={}},Uc=(e,t,r,n)=>{},Zc=(e,t,r,n)=>{const s=e._zod.def,o=Co(s.entries);o.every(i=>typeof i=="number")&&(r.type="number"),o.every(i=>typeof i=="string")&&(r.type="string"),r.enum=o},Bc=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Jc=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Vc=(e,t,r,n)=>{const s=r,o=e._zod.def,{minimum:i,maximum:a}=e._zod.bag;typeof i=="number"&&(s.minItems=i),typeof a=="number"&&(s.maxItems=a),s.type="array",s.items=F(o.element,t,{...n,path:[...n.path,"items"]})},Kc=(e,t,r,n)=>{var u;const s=r,o=e._zod.def;s.type="object",s.properties={};const i=o.shape;for(const l in i)s.properties[l]=F(i[l],t,{...n,path:[...n.path,"properties",l]});const a=new Set(Object.keys(i)),c=new Set([...a].filter(l=>{const h=o.shape[l]._zod;return t.io==="input"?h.optin===void 0:h.optout===void 0}));c.size>0&&(s.required=Array.from(c)),((u=o.catchall)==null?void 0:u._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=F(o.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):t.io==="output"&&(s.additionalProperties=!1)},Wc=(e,t,r,n)=>{const s=e._zod.def,o=s.inclusive===!1,i=s.options.map((a,c)=>F(a,t,{...n,path:[...n.path,o?"oneOf":"anyOf",c]}));o?r.oneOf=i:r.anyOf=i},Yc=(e,t,r,n)=>{const s=e._zod.def,o=F(s.left,t,{...n,path:[...n.path,"allOf",0]}),i=F(s.right,t,{...n,path:[...n.path,"allOf",1]}),a=u=>"allOf"in u&&Object.keys(u).length===1,c=[...a(o)?o.allOf:[o],...a(i)?i.allOf:[i]];r.allOf=c},Xc=(e,t,r,n)=>{const s=e._zod.def,o=F(s.innerType,t,n),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=s.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},Qc=(e,t,r,n)=>{const s=e._zod.def;F(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType},el=(e,t,r,n)=>{const s=e._zod.def;F(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,r.default=JSON.parse(JSON.stringify(s.defaultValue))},tl=(e,t,r,n)=>{const s=e._zod.def;F(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},rl=(e,t,r,n)=>{const s=e._zod.def;F(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType;let i;try{i=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=i},nl=(e,t,r,n)=>{const s=e._zod.def,o=t.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;F(o,t,n);const i=t.seen.get(e);i.ref=o},sl=(e,t,r,n)=>{const s=e._zod.def;F(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,r.readOnly=!0},Vo=(e,t,r,n)=>{const s=e._zod.def;F(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType},ol=(e,t)=>{Mo.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Fa(e,r)},flatten:{value:r=>La(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,_n,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,_n,2)}},isEmpty:{get(){return e.issues.length===0}}})},te=P("ZodError",ol,{Parent:Error}),il=Cn(te),al=$n(te),cl=Nr(te),ll=Dr(te),ul=Za(te),dl=Ba(te),hl=Ja(te),pl=Va(te),fl=Ka(te),ml=Wa(te),vl=Ya(te),gl=Xa(te),G=P("ZodType",(e,t)=>(D.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:Cr(e,"input"),output:Cr(e,"output")}}),e.toJSONSchema=Lc(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Oe(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),{parent:!0}),e.with=e.check,e.clone=(r,n)=>ke(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>il(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>cl(e,r,n),e.parseAsync=async(r,n)=>al(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>ll(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>ul(e,r,n),e.decode=(r,n)=>dl(e,r,n),e.encodeAsync=async(r,n)=>hl(e,r,n),e.decodeAsync=async(r,n)=>pl(e,r,n),e.safeEncode=(r,n)=>fl(e,r,n),e.safeDecode=(r,n)=>ml(e,r,n),e.safeEncodeAsync=async(r,n)=>vl(e,r,n),e.safeDecodeAsync=async(r,n)=>gl(e,r,n),e.refine=(r,n)=>e.check(Jl(r,n)),e.superRefine=r=>e.check(Vl(r)),e.overwrite=r=>e.check(Mc(r)),e.optional=()=>fs(e),e.exactOptional=()=>jl(e),e.nullable=()=>ms(e),e.nullish=()=>fs(ms(e)),e.nonoptional=r=>ql(e,r),e.array=()=>El(e),e.or=r=>Ol([e,r]),e.and=r=>Al(e,r),e.transform=r=>vs(e,$l(r)),e.default=r=>Nl(e,r),e.prefault=r=>Gl(e,r),e.catch=r=>Fl(e,r),e.pipe=r=>vs(e,r),e.readonly=()=>Zl(e),e.describe=r=>{const n=e.clone();return Nt.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Nt.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Nt.get(e);const n=e.clone();return Nt.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),Ko=P("ZodNumber",(e,t)=>{Lo.init(e,t),G.init(e,t),e._zod.processJSONSchema=(n,s,o)=>Fc(e,n,s),e.gt=(n,s)=>e.check(cs(n,s)),e.gte=(n,s)=>e.check(Kr(n,s)),e.min=(n,s)=>e.check(Kr(n,s)),e.lt=(n,s)=>e.check(as(n,s)),e.lte=(n,s)=>e.check(Vr(n,s)),e.max=(n,s)=>e.check(Vr(n,s)),e.int=n=>e.check(hs(n)),e.safe=n=>e.check(hs(n)),e.positive=n=>e.check(cs(0,n)),e.nonnegative=n=>e.check(Kr(0,n)),e.negative=n=>e.check(as(0,n)),e.nonpositive=n=>e.check(Vr(0,n)),e.multipleOf=(n,s)=>e.check(ls(n,s)),e.step=(n,s)=>e.check(ls(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ds(e){return Rc(Ko,e)}const _l=P("ZodNumberFormat",(e,t)=>{lc.init(e,t),Ko.init(e,t)});function hs(e){return Cc(_l,e)}const yl=P("ZodUnknown",(e,t)=>{uc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Uc()});function ps(){return $c(yl)}const Pl=P("ZodNever",(e,t)=>{dc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Hc(e,r,n)});function Tl(e){return Ic(Pl,e)}const bl=P("ZodArray",(e,t)=>{hc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Vc(e,r,n,s),e.element=t.element,e.min=(r,n)=>e.check(us(r,n)),e.nonempty=r=>e.check(us(1,r)),e.max=(r,n)=>e.check(jc(r,n)),e.length=(r,n)=>e.check(zc(r,n)),e.unwrap=()=>e.element});function El(e,t){return Nc(bl,e,t)}const wl=P("ZodObject",(e,t)=>{fc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Kc(e,r,n,s),A(e,"shape",()=>t.shape),e.keyof=()=>Rl(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ps()}),e.loose=()=>e.clone({...e._zod.def,catchall:ps()}),e.strict=()=>e.clone({...e._zod.def,catchall:Tl()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Ma(e,r),e.safeExtend=r=>Na(e,r),e.merge=r=>Da(e,r),e.pick=r=>ja(e,r),e.omit=r=>za(e,r),e.partial=(...r)=>Ga(Wo,e,r[0]),e.required=(...r)=>qa(Yo,e,r[0])});function Sl(e,t){const r={type:"object",shape:e??{},...I(t)};return new wl(r)}const xl=P("ZodUnion",(e,t)=>{mc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Wc(e,r,n,s),e.options=t.options});function Ol(e,t){return new xl({type:"union",options:e,...I(t)})}const kl=P("ZodIntersection",(e,t)=>{vc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Yc(e,r,n,s)});function Al(e,t){return new kl({type:"intersection",left:e,right:t})}const Pn=P("ZodEnum",(e,t)=>{gc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(n,s,o)=>Zc(e,n,s),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const o={};for(const i of n)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Pn({...t,checks:[],...I(s),entries:o})},e.exclude=(n,s)=>{const o={...t.entries};for(const i of n)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new Pn({...t,checks:[],...I(s),entries:o})}});function Rl(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Pn({type:"enum",entries:r,...I(t)})}const Cl=P("ZodTransform",(e,t)=>{_c.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Jc(e,r),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Ao(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(Ht(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(Ht(i))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function $l(e){return new Cl({type:"transform",transform:e})}const Wo=P("ZodOptional",(e,t)=>{Uo.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Vo(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function fs(e){return new Wo({type:"optional",innerType:e})}const Il=P("ZodExactOptional",(e,t)=>{yc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Vo(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function jl(e){return new Il({type:"optional",innerType:e})}const zl=P("ZodNullable",(e,t)=>{Pc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Xc(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function ms(e){return new zl({type:"nullable",innerType:e})}const Ml=P("ZodDefault",(e,t)=>{Tc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>el(e,r,n,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Nl(e,t){return new Ml({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Io(t)}})}const Dl=P("ZodPrefault",(e,t)=>{bc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>tl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function Gl(e,t){return new Dl({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Io(t)}})}const Yo=P("ZodNonOptional",(e,t)=>{Ec.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Qc(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function ql(e,t){return new Yo({type:"nonoptional",innerType:e,...I(t)})}const Ll=P("ZodCatch",(e,t)=>{wc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>rl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Fl(e,t){return new Ll({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Hl=P("ZodPipe",(e,t)=>{Sc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>nl(e,r,n,s),e.in=t.in,e.out=t.out});function vs(e,t){return new Hl({type:"pipe",in:e,out:t})}const Ul=P("ZodReadonly",(e,t)=>{xc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>sl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function Zl(e){return new Ul({type:"readonly",innerType:e})}const Bl=P("ZodCustom",(e,t)=>{Oc.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Bc(e,r)});function Jl(e,t={}){return Dc(Bl,e,t)}function Vl(e){return Gc(e)}const In=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function Xo(e){return e&&typeof e=="object"&&In.some(t=>Object.prototype.hasOwnProperty.call(e,t))}function Gr(e,t){return Wl(e)}function gs(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27").replace(/%5B/g,"[").replace(/%5D/g,"]")}function Kl(e){return e instanceof Date?Math.floor(e.getTime()/1e3).toString():e===null?"":String(e)}function Wl(e){const t=[];function r(n,s){if(s!==void 0){if(s===null||typeof s!="object"||s instanceof Date){t.push(gs(n)+"="+gs(Kl(s)));return}if(Array.isArray(s)){for(let o=0;o<s.length;o++)s[o]!==void 0&&r(n+"["+o+"]",s[o]);return}for(const o of Object.keys(s))r(n+"["+o+"]",s[o])}}if(typeof e=="object"&&e!==null)for(const n of Object.keys(e))r(n,e[n]);return t.join("&")}const Tn=(()=>{const e={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return t=>{const r=t.replace(/["\n\r\u2028\u2029]/g,n=>e[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(s,o)=>{const i=n[o];return Yl(i)?encodeURIComponent(i):""})}})();function Yl(e){return["number","string","boolean"].includes(typeof e)}function Xl(e){const t=e.match(/\{\w+\}/g);return t?t.map(r=>r.replace(/[{}]/g,"")):[]}function jn(e){if(!Array.isArray(e)||!e[0]||typeof e[0]!="object")return{};if(!Xo(e[0]))return e.shift();const t=Object.keys(e[0]),r=t.filter(n=>In.includes(n));return r.length>0&&r.length!==t.length&&$r(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function Qo(e){const t={host:null,headers:{},settings:{},streaming:!1};if(e.length>0){const r=e[e.length-1];if(typeof r=="string")t.authenticator=bn(e.pop());else if(Xo(r)){const n=Object.assign({},e.pop()),s=Object.keys(n).filter(o=>!In.includes(o));if(s.length&&$r(`Invalid options found (${s.join(", ")}); ignoring.`),n.apiKey&&(t.authenticator=bn(n.apiKey)),n.idempotencyKey&&(t.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(t.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(t.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");t.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(t.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(t.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(t.settings.timeout=n.timeout),n.host&&(t.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");t.authenticator=n.authenticator}n.additionalHeaders&&(t.headers=n.additionalHeaders),n.streaming&&(t.streaming=!0)}}return t}function Ql(e){const t=this,r=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...n){t.apply(this,n)};return Object.assign(r,t),r.prototype=Object.create(t.prototype),Object.assign(r.prototype,e),r}function Wr(e){if(typeof e!="object")throw new Error("Argument must be an object");return Object.keys(e).reduce((t,r)=>(e[r]!=null&&(t[r]=e[r]),t),{})}function eu(e){return e&&typeof e=="object"?Object.keys(e).reduce((t,r)=>(t[tu(r)]=e[r],t),{}):e}function tu(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()).join("-")}function zn(e,t){return t?e.then(r=>{setTimeout(()=>{t(null,r)},0)},r=>{setTimeout(()=>{t(r,null)},0)}):e}function ru(e){return e==="OAuth"?"oauth":e[0].toLowerCase()+e.substring(1)}function $r(e){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}function nu(e){const t=typeof e;return(t==="function"||t==="object")&&!!e}function su(e){const t={},r=(n,s)=>{Object.entries(n).forEach(([o,i])=>{const a=s?`${s}[${o}]`:o;if(nu(i)){if(!(i instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(i,"data"))return r(i,a);t[a]=i}else t[a]=String(i)})};return r(e,null),t}function Yr(e,t,r){if(!Number.isInteger(t)){if(r!==void 0)return r;throw new Error(`${e} must be an integer`)}return t}function ou(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function bn(e){const t=r=>(r.headers.Authorization="Bearer "+e,Promise.resolve());return t._apiKey=e,t}function iu(e,t){return this[e]instanceof Date?Math.floor(this[e].getTime()/1e3).toString():t}function au(e){return JSON.stringify(e,iu)}function ei(e){return e&&e.startsWith("/v2")?"v2":"v1"}function En(e){return Array.isArray(e)?e.join(", "):String(e)}function cu(e){const t=Array.isArray(e)?e[0]:e;return Number(t)}function lu(e){return Object.entries(e).map(([t,r])=>[t,En(r)])}class ee{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(t,r,n,s,o,i,a,c){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const t=new TypeError(ee.TIMEOUT_ERROR_CODE);return t.code=ee.TIMEOUT_ERROR_CODE,t}}ee.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];ee.TIMEOUT_ERROR_CODE="ETIMEDOUT";class ti{constructor(t,r){this._statusCode=t,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(t){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Ir extends ee{constructor(t){if(super(),!t){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");t=globalThis.fetch}globalThis.AbortController?this._fetchFn=Ir.makeFetchWithAbortTimeout(t):this._fetchFn=Ir.makeFetchWithRaceTimeout(t)}static makeFetchWithRaceTimeout(t){return(r,n,s)=>{let o;const i=new Promise((c,u)=>{o=setTimeout(()=>{o=null,u(ee.makeTimeoutError())},s)}),a=t(r,n);return Promise.race([a,i]).finally(()=>{o&&clearTimeout(o)})}}static makeFetchWithAbortTimeout(t){return async(r,n,s)=>{const o=new AbortController;let i=setTimeout(()=>{i=null,o.abort(ee.makeTimeoutError())},s);try{return await t(r,Object.assign(Object.assign({},n),{signal:o.signal}))}catch(a){throw a.name==="AbortError"?ee.makeTimeoutError():a}finally{i&&clearTimeout(i)}}}getClientName(){return"fetch"}async makeRequest(t,r,n,s,o,i,a,c){const u=a==="http",l=new URL(n,`${u?"http":"https"}://${t}`);l.port=r;const h=s=="POST"||s=="PUT"||s=="PATCH",p=i||(h?"":void 0),m=await this._fetchFn(l.toString(),{method:s,headers:lu(o),body:p},c);return new Mn(m)}}class Mn extends ti{constructor(t){super(t.status,Mn._transformHeadersToObject(t.headers)),this._res=t}getRawResponse(){return this._res}toStream(t){return t(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(t){const r={};for(const n of t){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}class ri{computeHMACSignature(t,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(t,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(t){throw new Error("computeSHA256 not implemented.")}}class ni extends Error{}class uu extends ri{constructor(t){super(),this.subtleCrypto=t||crypto.subtle}computeHMACSignature(t,r){throw new ni("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(t,r){const n=new TextEncoder,s=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=await this.subtleCrypto.sign("hmac",s,n.encode(t)),i=new Uint8Array(o),a=new Array(i.length);for(let c=0;c<i.length;c++)a[c]=wn[i[c]];return a.join("")}async computeSHA256Async(t){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",t))}}const wn=new Array(256);for(let e=0;e<wn.length;e++)wn[e]=e.toString(16).padStart(2,"0");class du{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}secureCompare(t,r){if(t.length!==r.length)return!1;const n=t.length;let s=0;for(let o=0;o<n;++o)s|=t.charCodeAt(o)^r.charCodeAt(o);return s===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(t){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(t){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(t){return new Ir(t)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(t){return new uu(t)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class hu extends Event{constructor(t,r){super(t),this.data=r}}class pu{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(t,r){const n=s=>{r(s.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(t,n)}removeListener(t,r){const n=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(t,n)}once(t,r){const n=s=>{r(s.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(t,n,{once:!0})}emit(t,r){return this.eventTarget.dispatchEvent(new hu(t,r))}}class fu extends du{getUname(){return Promise.resolve(null)}createEmitter(){return new pu}tryBufferData(t){if(t.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(t)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const qr=e=>{switch(e.type){case"card_error":return new oi(e);case"invalid_request_error":return new Nn(e);case"api_error":return new Dn(e);case"authentication_error":return new Gn(e);case"rate_limit_error":return new qn(e);case"idempotency_error":return new ci(e);case"invalid_grant":return new li(e);default:return new ui(e)}},si=e=>{switch(e.type){case"temporary_session_expired":return new di(e)}switch(e.code){case"invalid_fields":return new Nn(e)}return qr(e)};class B extends Error{constructor(t={},r=null){var n;super(t.message),this.type=r||this.constructor.name,this.raw=t,this.rawType=t.type,this.code=t.code,this.doc_url=t.doc_url,this.param=t.param,this.detail=t.detail,this.headers=t.headers,this.requestId=t.requestId,this.statusCode=t.statusCode,this.message=(n=t.message)!==null&&n!==void 0?n:"",this.userMessage=t.user_message,this.charge=t.charge,this.decline_code=t.decline_code,this.payment_intent=t.payment_intent,this.payment_method=t.payment_method,this.payment_method_type=t.payment_method_type,this.setup_intent=t.setup_intent,this.source=t.source}}B.generate=qr;class oi extends B{constructor(t={}){super(t,"StripeCardError")}}class Nn extends B{constructor(t={}){super(t,"StripeInvalidRequestError")}}class Dn extends B{constructor(t={}){super(t,"StripeAPIError")}}class Gn extends B{constructor(t={}){super(t,"StripeAuthenticationError")}}class ii extends B{constructor(t={}){super(t,"StripePermissionError")}}class qn extends B{constructor(t={}){super(t,"StripeRateLimitError")}}class ai extends B{constructor(t={}){super(t,"StripeConnectionError")}}class Pe extends B{constructor(t,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=t,this.payload=r}}class ci extends B{constructor(t={}){super(t,"StripeIdempotencyError")}}class li extends B{constructor(t={}){super(t,"StripeInvalidGrantError")}}class ui extends B{constructor(t={}){super(t,"StripeUnknownError")}}class di extends B{constructor(t={}){super(t,"TemporarySessionExpiredError")}}const _s=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:Dn,StripeAuthenticationError:Gn,StripeCardError:oi,StripeConnectionError:ai,StripeError:B,StripeIdempotencyError:ci,StripeInvalidGrantError:li,StripeInvalidRequestError:Nn,StripePermissionError:ii,StripeRateLimitError:qn,StripeSignatureVerificationError:Pe,StripeUnknownError:ui,TemporarySessionExpiredError:di,generateV1Error:qr,generateV2Error:si},Symbol.toStringTag,{value:"Module"})),mu=60;class qt{constructor(t,r){this._stripe=t,this._maxBufferedRequestMetric=r}_normalizeStripeContext(t,r){return t?t.toString()||null:(r==null?void 0:r.toString())||null}_addHeadersDirectlyToObject(t,r){t.requestId=r["request-id"],t.stripeAccount=t.stripeAccount||r["stripe-account"],t.apiVersion=t.apiVersion||r["stripe-version"],t.idempotencyKey=t.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(t,r,n){const s=Date.now(),o=s-t.request_start_time;return Wr({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:t.method,path:t.path,status:r,request_id:this._getRequestId(n),elapsed:o,request_start_time:t.request_start_time,request_end_time:s})}_getRequestId(t){return t["request-id"]}_streamingResponseHandler(t,r,n){return s=>{const o=s.getHeaders(),i=()=>{const c=this._makeResponseEvent(t,s.getStatusCode(),o);this._stripe._emitter.emit("response",c),this._recordRequestMetrics(this._getRequestId(o),c.elapsed,r)},a=s.toStream(i);return this._addHeadersDirectlyToObject(a,o),n(null,a)}}_jsonResponseHandler(t,r,n,s){return o=>{const i=o.getHeaders(),a=this._getRequestId(i),c=o.getStatusCode(),u=this._makeResponseEvent(t,c,i);this._stripe._emitter.emit("response",u),o.toJSON().then(l=>{if(l.error){let h;throw typeof l.error=="string"&&(l.error={type:l.error,message:l.error_description}),l.error.headers=i,l.error.statusCode=c,l.error.requestId=a,c===401?h=new Gn(l.error):c===403?h=new ii(l.error):c===429?h=new qn(l.error):r==="v2"?h=si(l.error):h=qr(l.error),h}return l},l=>{throw new Dn({message:"Invalid JSON received from the Stripe API",exception:l,requestId:i["request-id"]})}).then(l=>{this._recordRequestMetrics(a,u.elapsed,n);const h=o.getRawResponse();this._addHeadersDirectlyToObject(h,i),Object.defineProperty(l,"lastResponse",{enumerable:!1,writable:!1,value:h}),s(null,l)},l=>s(l,null))}}static _generateConnectionErrorMessage(t){return`An error occurred with our connection to Stripe.${t>0?` Request was retried ${t} times.`:""}`}static _shouldRetry(t,r,n,s){return s&&r===0&&ee.CONNECTION_CLOSED_ERROR_CODES.includes(s.code)?!0:r>=n?!1:t?t.getHeaders()["stripe-should-retry"]==="false"?!1:t.getHeaders()["stripe-should-retry"]==="true"||t.getStatusCode()===409||t.getStatusCode()>=500:!0}_getSleepTimeInMS(t,r=null){const n=this._stripe.getInitialNetworkRetryDelay(),s=this._stripe.getMaxNetworkRetryDelay();let o=Math.min(n*Math.pow(2,t-1),s);return o*=.5*(1+Math.random()),o=Math.max(n,o),Number.isInteger(r)&&r<=mu&&(o=Math.max(o,r)),o*1e3}_getMaxNetworkRetries(t={}){return t.maxNetworkRetries!==void 0&&Number.isInteger(t.maxNetworkRetries)?t.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(t,r,n){const s=this._getMaxNetworkRetries(r),o=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(t==="POST"||t==="DELETE")return o()}else if(n==="v1"&&t==="POST"&&s>0)return o();return null}_makeHeaders({contentType:t,contentLength:r,apiVersion:n,clientUserAgent:s,method:o,userSuppliedHeaders:i,userSuppliedSettings:a,stripeAccount:c,stripeContext:u,apiMode:l}){const h={Accept:"application/json","Content-Type":t,"User-Agent":this._getUserAgentString(l),"X-Stripe-Client-User-Agent":s,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":c,"Stripe-Context":u,"Idempotency-Key":this._defaultIdempotencyKey(o,a,l)},p=o=="POST"||o=="PUT"||o=="PATCH";return(p||r)&&(p||$r(`${o} method had non-zero contentLength but no payload is expected for this verb`),h["Content-Length"]=r),Object.assign(Wr(h),eu(i))}_getUserAgentString(t){const r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${t} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const t=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:t})}}_recordRequestMetrics(t,r,n){if(this._stripe.getTelemetryEnabled()&&t)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)$r("Request metrics buffer is full, dropping telemetry message.");else{const s={request_id:t,request_duration_ms:r};n&&n.length>0&&(s.usage=n),this._stripe._prevRequestMetrics.push(s)}}_rawRequest(t,r,n,s,o){return new Promise((a,c)=>{let u;try{const v=t.toUpperCase();if(v!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const _=[].slice.call([n,s]),g=jn(_),y=v==="POST"?Object.assign({},g):null,b=Qo(_),O=b.headers,w=b.authenticator;u={requestMethod:v,requestPath:r,bodyData:y,queryData:{},authenticator:w,headers:O,host:b.host,streaming:!!b.streaming,settings:{},usage:o||["raw_request"]}}catch(v){c(v);return}function l(v,_){v?c(v):a(_)}const{headers:h,settings:p}=u,m=u.authenticator;this._request(u.requestMethod,u.host,r,u.bodyData,m,{headers:h,settings:p,streaming:u.streaming},u.usage,l)})}_getContentLength(t){return typeof t=="string"?new TextEncoder().encode(t).length:t.length}_request(t,r,n,s,o,i,a=[],c,u=null){var l;let h;o=(l=o??this._stripe._authenticator)!==null&&l!==void 0?l:null;const p=ei(n),m=(g,y,b,O,w)=>setTimeout(g,this._getSleepTimeInMS(O,w),y,b,O+1),v=(g,y,b)=>{const O=i.settings&&i.settings.timeout&&Number.isInteger(i.settings.timeout)&&i.settings.timeout>=0?i.settings.timeout:this._stripe.getApiField("timeout"),w={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:t,headers:Object.assign({},y),body:h,protocol:this._stripe.getApiField("protocol")};o(w).then(()=>{const S=this._stripe.getApiField("httpClient").makeRequest(w.host,w.port,w.path,w.method,w.headers,w.body,w.protocol,O),j=Date.now(),z=Wr({api_version:g,account:En(y["Stripe-Account"]),idempotency_key:En(y["Idempotency-Key"]),method:t,path:n,request_start_time:j}),H=b||0,U=this._getMaxNetworkRetries(i.settings||{});this._stripe._emitter.emit("request",z),S.then(Y=>qt._shouldRetry(Y,H,U)?m(v,g,y,H,cu(Y.getHeaders()["retry-after"])):i.streaming&&Y.getStatusCode()<400?this._streamingResponseHandler(z,a,c)(Y):this._jsonResponseHandler(z,p,a,c)(Y)).catch(Y=>{if(qt._shouldRetry(null,H,U,Y))return m(v,g,y,H,null);{const ie=Y.code&&Y.code===ee.TIMEOUT_ERROR_CODE;return c(new ai({message:ie?`Request aborted due to timeout being reached (${O}ms)`:qt._generateConnectionErrorMessage(H),detail:Y}))}})}).catch(S=>{throw new B({message:"Unable to authenticate the request",exception:S})})},_=(g,y)=>{if(g)return c(g);h=y,this._stripe.getClientUserAgent(b=>{var O,w,S;const j=this._stripe.getApiField("version"),z=this._makeHeaders({contentType:p=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:this._getContentLength(y),apiVersion:j,clientUserAgent:b,method:t,userSuppliedHeaders:(O=i.headers)!==null&&O!==void 0?O:null,userSuppliedSettings:(w=i.settings)!==null&&w!==void 0?w:{},stripeAccount:(S=i.stripeAccount)!==null&&S!==void 0?S:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(i.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:p});v(j,z,0)})};if(u)u(t,s,i.headers,_);else{let g;p=="v2"?g=s?au(s):"":g=Gr(s||{}),_(null,g)}}}class hi{constructor(t,r,n,s){this.index=0,this.pagePromise=t,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=s}async iterate(t){if(!(t&&t.data&&typeof t.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=pi(this.requestArgs);if(this.index<t.data.length){const n=r?t.data.length-1-this.index:this.index,s=t.data[n];return this.index+=1,{value:s,done:!1}}else if(t.has_more){this.index=0,this.pagePromise=this.getNextPage(t);const n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(t){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const t=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=t,t}}class vu extends hi{getNextPage(t){const r=pi(this.requestArgs),n=Eu(t,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}}class gu extends hi{getNextPage(t){if(!t.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:t.next_page})}}class _u{constructor(t,r,n,s){this.firstPagePromise=t,this.currentPageIterator=null,this.nextPageUrl=null,this.requestArgs=r,this.spec=n,this.stripeResource=s}async initFirstPage(){if(this.firstPagePromise){const t=await this.firstPagePromise;this.firstPagePromise=null,this.currentPageIterator=t.data[Symbol.iterator](),this.nextPageUrl=t.next_page_url||null}}async turnPage(){if(!this.nextPageUrl)return null;this.spec.fullPath=this.nextPageUrl;const t=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=t.next_page_url||null,this.currentPageIterator=t.data[Symbol.iterator](),this.currentPageIterator}async next(){if(await this.initFirstPage(),this.currentPageIterator){const n=this.currentPageIterator.next();if(!n.done)return{done:!1,value:n.value}}const t=await this.turnPage();if(!t)return{done:!0,value:void 0};const r=t.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}}const yu=(e,t,r,n)=>{const s=ei(r.fullPath||r.path);return s!=="v2"&&r.methodType==="search"?Xr(new gu(n,t,r,e)):s!=="v2"&&r.methodType==="list"?Xr(new vu(n,t,r,e)):s==="v2"&&r.methodType==="list"?Xr(new _u(n,t,r,e)):null},Xr=e=>{const t=wu((...s)=>e.next(...s)),r=Su(t),n={autoPagingEach:t,autoPagingToArray:r,next:()=>e.next(),return:()=>({}),[Pu()]:()=>n};return n};function Pu(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function Tu(e){if(e.length<2)return null;const t=e[1];if(typeof t!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);return t}function bu(e){if(e.length===0)return;const t=e[0];if(typeof t!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);if(t.length===2)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return function(n,s){const o=t(n);s(o)}}function Eu(e,t){const r=t?0:e.data.length-1,n=e.data[r],s=n&&n.id;if(!s)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return s}function wu(e){return function(){const r=[].slice.call(arguments),n=bu(r),s=Tu(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const o=xu(e,n);return zn(o,s)}}function Su(e){return function(r,n){const s=r&&r.limit;if(!s)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(s>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const o=new Promise((i,a)=>{const c=[];e(u=>{if(c.push(u),c.length>=s)return!1}).then(()=>{i(c)}).catch(a)});return zn(o,n)}}function xu(e,t){return new Promise((r,n)=>{function s(o){if(o.done){r();return}const i=o.value;return new Promise(a=>{t(i,a)}).then(a=>a===!1?s({done:!0,value:void 0}):e().then(s))}e().then(s).catch(n)})}function pi(e){const t=[].slice.call(e);return!!jn(t).ending_before}function Ou(e){if(e.path!==void 0&&e.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){const r=typeof t[t.length-1]=="function"&&t.pop();e.urlParams=Xl(e.fullPath||this.createResourcePathWithSymbols(e.path||""));const n=zn(this._makeRequest(t,e,{}),r);return Object.assign(n,yu(this,t,e,n)),n}}d.extend=Ql;d.method=Ou;d.MAX_BUFFERED_REQUEST_METRICS=100;function d(e,t){if(this._stripe=e,t)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=Tn(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=Tn(this.path),this.initialize(...arguments)}d.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){const r=[this.basePath(t),this.path(t)];if(typeof e=="function"){const n=e(t);n&&r.push(n)}else r.push(e);return this._joinUrlParts(r)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts(e){return e.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(e,t,r){var n;const s=(t.method||"GET").toUpperCase(),o=t.usage||[],i=t.urlParams||[],a=t.encode||(z=>z),c=!!t.fullPath,u=Tn(c?t.fullPath:t.path||""),l=c?t.fullPath:this.createResourcePathWithSymbols(t.path),h=[].slice.call(e),p=i.reduce((z,H)=>{const U=h.shift();if(typeof U!="string")throw new Error(`Stripe: Argument "${H}" must be a string, but got: ${U} (on API request to \`${s} ${l}\`)`);return z[H]=U,z},{}),m=jn(h),v=a(Object.assign({},m,r)),_=Qo(h),g=_.host||t.host,y=!!t.streaming||!!_.streaming;if(h.filter(z=>z!=null).length)throw new Error(`Stripe: Unknown arguments (${h}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${l}\`)`);const b=c?u(p):this.createFullPath(u,p),O=Object.assign(_.headers,t.headers);t.validator&&t.validator(v,{headers:O});const w=t.method==="GET"||t.method==="DELETE";return{requestMethod:s,requestPath:b,bodyData:w?null:v,queryData:w?v:{},authenticator:(n=_.authenticator)!==null&&n!==void 0?n:null,headers:O,host:g??null,streaming:y,settings:_.settings,usage:o}},_makeRequest(e,t,r){return new Promise((n,s)=>{var o;let i;try{i=this._getRequestOpts(e,t,r)}catch(p){s(p);return}function a(p,m){p?s(p):n(t.transformResponseData?t.transformResponseData(m):m)}const c=Object.keys(i.queryData).length===0,u=[i.requestPath,c?"":"?",Gr(i.queryData)].join(""),{headers:l,settings:h}=i;this._stripe._requestSender._request(i.requestMethod,i.host,u,i.bodyData,i.authenticator,{headers:l,settings:h,streaming:i.streaming},i.usage,a,(o=this.requestDataProcessor)===null||o===void 0?void 0:o.bind(this))})}};class Me{constructor(t=[]){this._segments=[...t]}get segments(){return[...this._segments]}push(t){if(!t)throw new Error("Segment cannot be null or undefined");return new Me([...this._segments,t])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new Me(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(t){return t?new Me(t.split("/")):new Me([])}}function ku(e){const t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(l,h,p,m,v,_){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(l,h,p,m||t.DEFAULT_TOLERANCE,v,_)}catch(y){throw y instanceof ni&&(y.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),y}return l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},async constructEventAsync(l,h,p,m,v,_){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(l,h,p,m||t.DEFAULT_TOLERANCE,v,_),l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},generateTestHeaderString:function(l){const h=u(l),p=h.signature||h.cryptoProvider.computeHMACSignature(h.payloadString,h.secret);return h.generateHeaderString(p)},generateTestHeaderStringAsync:async function(l){const h=u(l),p=h.signature||await h.cryptoProvider.computeHMACSignatureAsync(h.payloadString,h.secret);return h.generateHeaderString(p)}},r={EXPECTED_SCHEME:"v1",verifyHeader(l,h,p,m,v,_){const{decodedHeader:g,decodedPayload:y,details:b,suspectPayloadType:O}=s(l,h,this.EXPECTED_SCHEME),w=/\s/.test(p);v=v||c();const S=v.computeHMACSignature(n(y,b),p);return o(y,g,b,S,m,O,w,_),!0},async verifyHeaderAsync(l,h,p,m,v,_){const{decodedHeader:g,decodedPayload:y,details:b,suspectPayloadType:O}=s(l,h,this.EXPECTED_SCHEME),w=/\s/.test(p);v=v||c();const S=await v.computeHMACSignatureAsync(n(y,b),p);return o(y,g,b,S,m,O,w,_)}};function n(l,h){return`${h.timestamp}.${l}`}function s(l,h,p){if(!l)throw new Pe(h,l,{message:"No webhook payload was provided."});const m=typeof l!="string"&&!(l instanceof Uint8Array),v=new TextDecoder("utf8"),_=l instanceof Uint8Array?v.decode(l):l;if(Array.isArray(h))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(h==null||h=="")throw new Pe(h,l,{message:"No stripe-signature header value was provided."});const g=h instanceof Uint8Array?v.decode(h):h,y=i(g,p);if(!y||y.timestamp===-1)throw new Pe(g,_,{message:"Unable to extract timestamp and signatures from header"});if(!y.signatures.length)throw new Pe(g,_,{message:"No signatures found with expected scheme"});return{decodedPayload:_,decodedHeader:g,details:y,suspectPayloadType:m}}function o(l,h,p,m,v,_,g,y){const b=!!p.signatures.filter(e.secureCompare.bind(e,m)).length,O=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,w=g?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!b)throw _?new Pe(h,l,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+O+`
`+w}):new Pe(h,l,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+O+`
`+w});const S=Math.floor((typeof y=="number"?y:Date.now())/1e3)-p.timestamp;if(v>0&&S>v)throw new Pe(h,l,{message:"Timestamp outside the tolerance zone"});return!0}function i(l,h){return typeof l!="string"?null:l.split(",").reduce((p,m)=>{const v=m.split("=");return v[0]==="t"&&(p.timestamp=parseInt(v[1],10)),v[0]===h&&p.signatures.push(v[1]),p},{timestamp:-1,signatures:[]})}let a=null;function c(){return a||(a=e.createDefaultCryptoProvider()),a}function u(l){if(!l)throw new B({message:"Options are required"});const h=Math.floor(l.timestamp)||Math.floor(Date.now()/1e3),p=l.scheme||r.EXPECTED_SCHEME,m=l.cryptoProvider||c(),v=`${h}.${l.payload}`,_=g=>`t=${h},${p}=${g}`;return Object.assign(Object.assign({},l),{timestamp:h,scheme:p,cryptoProvider:m,payloadString:v,generateHeaderString:_})}return t.signature=r,t}const fi="2026-01-28.clover";function Au(e,t){for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const n=r[0].toLowerCase()+r.substring(1),s=new t[r](e);this[n]=s}}function C(e,t){return function(r){return new Au(r,t)}}const Ru=d.method,Cu=d.extend({create:Ru({method:"POST",fullPath:"/v2/core/account_links"})}),ys=d.method,$u=d.extend({create:ys({method:"POST",fullPath:"/v2/core/account_tokens"}),retrieve:ys({method:"GET",fullPath:"/v2/core/account_tokens/{id}"})}),Ae=d.method,Iu=d.extend({retrieve:Ae({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Ae({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Ae({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Ae({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Ae({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Ae({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Ae({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),vt=d.method,ju=d.extend({create:vt({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons"}),retrieve:vt({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),update:vt({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),list:vt({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons",methodType:"list"}),del:vt({method:"DELETE",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"})}),Ps=d.method,zu=d.extend({create:Ps({method:"POST",fullPath:"/v2/core/accounts/{account_id}/person_tokens"}),retrieve:Ps({method:"GET",fullPath:"/v2/core/accounts/{account_id}/person_tokens/{id}"})}),gt=d.method,Mu=d.extend({constructor:function(...e){d.apply(this,e),this.persons=new ju(...e),this.personTokens=new zu(...e)},create:gt({method:"POST",fullPath:"/v2/core/accounts"}),retrieve:gt({method:"GET",fullPath:"/v2/core/accounts/{id}"}),update:gt({method:"POST",fullPath:"/v2/core/accounts/{id}"}),list:gt({method:"GET",fullPath:"/v2/core/accounts",methodType:"list"}),close:gt({method:"POST",fullPath:"/v2/core/accounts/{id}/close"})}),Ts=d.method,Nu=d.extend({retrieve:Ts({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:Ts({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),Je=d.method,Du=d.extend({create:Je({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:Je({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:Je({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:Je({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:Je({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:Je({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),Gu=d.method,qu=d.extend({find:Gu({method:"GET",fullPath:"/v1/tax/associations/find"})}),_t=d.method,Lu=d.extend({retrieve:_t({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:_t({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:_t({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:_t({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:_t({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),Re=d.method,Fu=d.extend({create:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:Re({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),Qr=d.method,Hu=d.extend({create:Qr({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:Qr({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:Qr({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),tr=d.method,Uu=d.extend({create:tr({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:tr({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:tr({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:tr({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),rr=d.method,Zu=d.extend({create:rr({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:rr({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:rr({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:rr({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),yt=d.method,Bu=d.extend({deliverCard:yt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:yt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:yt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:yt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:yt({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),nr=d.method,Ju=d.extend({create:nr({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:nr({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:nr({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:nr({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),Pt=d.method,Vu=d.extend({create:Pt({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:Pt({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:Pt({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:Pt({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:Pt({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),Ku=d.method,Wu=d.extend({create:Ku({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),Yu=d.method,Xu=d.extend({create:Yu({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Qu=d.method,ed=d.extend({retrieve:Qu({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),bs=d.method,td=d.extend({retrieve:bs({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:bs({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),Ve=d.method,rd=d.extend({create:Ve({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:Ve({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:Ve({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:Ve({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:Ve({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:Ve({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),en=d.method,nd=d.extend({create:en({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:en({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:en({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),sd=d.method,od=d.extend({fundCashBalance:sd({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),tn=d.method,id=d.extend({create:tn({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:tn({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:tn({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),Tt=d.method,ad=d.extend({create:Tt({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:Tt({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:Tt({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:Tt({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:Tt({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),Es=d.method,cd=d.extend({retrieve:Es({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Es({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),ve=d.method,ld=d.extend({create:ve({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:ve({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:ve({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:ve({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:ve({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:ve({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:ve({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:ve({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),rn=d.method,ud=d.extend({retrieve(...e){return rn({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:r=>this.addFetchRelatedObjectIfNeeded(r)}).apply(this,e)},list(...e){return rn({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,e)},addFetchRelatedObjectIfNeeded(e){return!e.related_object||!e.related_object.url?e:Object.assign(Object.assign({},e),{fetchRelatedObject:()=>rn({method:"GET",fullPath:e.related_object.url}).apply(this,[{stripeContext:e.context}])})}}),sr=d.method,dd=d.extend({create:sr({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:sr({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:sr({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:sr({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),Ce=d.method,hd=d.extend({create:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:Ce({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:Ce({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:Ce({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:Ce({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),nn=d.method,pd=d.extend({fail:nn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:nn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:nn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),or=d.method,fd=d.extend({create:or({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:or({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:or({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:or({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),bt=d.method,md=d.extend({create:bt({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:bt({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:bt({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:bt({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:bt({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),vd=d.method,gd=d.extend({create:vd({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),_d=d.method,yd=d.extend({create:_d({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),Pd=d.method,Td=d.extend({create:Pd({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),bd=d.method,Ed=d.extend({create:bd({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),wd=d.method,Sd=d.extend({create:wd({method:"POST",fullPath:"/v1/billing/meter_events"})}),xd=d.method,Od=d.extend({create:xd({method:"POST",fullPath:"/v2/billing/meter_events"})}),$e=d.method,kd=d.extend({create:$e({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:$e({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:$e({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:$e({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:$e({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:$e({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:$e({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),Ad=d.method,Rd=d.extend({create:Ad({method:"POST",fullPath:"/v1/terminal/onboarding_links"})}),Et=d.method,Cd=d.extend({create:Et({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:Et({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:Et({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:Et({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:Et({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),ir=d.method,$d=d.extend({update:ir({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:ir({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:ir({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:ir({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),ar=d.method,Id=d.extend({create:ar({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:ar({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:ar({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:ar({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),cr=d.method,jd=d.extend({update:cr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:cr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:cr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:cr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),lr=d.method,zd=d.extend({create:lr({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:lr({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:lr({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:lr({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),Md=d.method,Nd=d.extend({create:Md({method:"POST",fullPath:"/v1/radar/payment_evaluations"})}),ur=d.method,Dd=d.extend({create:ur({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:ur({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:ur({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:ur({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),sn=d.method,Gd=d.extend({activate:sn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:sn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:sn({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),ws=d.method,qd=d.extend({retrieve:ws({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:ws({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),Ss=d.method,Ld=d.extend({retrieve:Ss({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:Ss({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),W=d.method,Fd=d.extend({create:W({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:W({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:W({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:W({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:W({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),on=d.method,Hd=d.extend({presentPaymentMethod:on({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:on({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:on({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})}),Ud=d.method,Zd=d.extend({create:Ud({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),xs=d.method,Bd=d.extend({retrieve:xs({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:xs({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),Jd=d.method,Vd=d.extend({create:Jd({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),Os=d.method,Kd=d.extend({retrieve:Os({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:Os({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),Wd=d.method,Yd=d.extend({expire:Wd({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),dr=d.method,Xd=d.extend({create:dr({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:dr({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:dr({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:dr({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),an=d.method,Qd=d.extend({create:an({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:an({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:an({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),ks=d.method,eh=d.extend({retrieve:ks({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:ks({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),cn=d.method,th=d.extend({create:cn({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:cn({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:cn({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),As=d.method,rh=d.extend({retrieve:As({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:As({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),hr=d.method,nh=d.extend({create:hr({method:"POST",fullPath:"/v1/apps/secrets"}),list:hr({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:hr({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:hr({method:"GET",fullPath:"/v1/apps/secrets/find"})}),sh=d.method,oh=d.extend({create:sh({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),Ke=d.method,ih=d.extend({create:Ke({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:Ke({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:Ke({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:Ke({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:Ke({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:Ke({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),Rs=d.method,ah=d.extend({create:Rs({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Rs({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),Cs=d.method,ch=d.extend({retrieve:Cs({method:"GET",fullPath:"/v1/tax/settings"}),update:Cs({method:"POST",fullPath:"/v1/tax/settings"})}),$s=d.method,lh=d.extend({retrieve:$s({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:$s({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),wt=d.method,uh=d.extend({create:wt({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:wt({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:wt({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:wt({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:wt({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),ln=d.method,dh=d.extend({retrieve:ln({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:ln({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:ln({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),Is=d.method,hh=d.extend({retrieve:Is({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Is({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),js=d.method,ph=d.extend({retrieve:js({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:js({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),un=d.method,fh=d.extend({retrieve:un({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:un({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:un({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),pr=d.method,mh=d.extend({retrieve:pr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:pr({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:pr({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:pr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),dn=d.method,vh=d.extend({createForceCapture:dn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:dn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:dn({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),zs=d.method,gh=d.extend({retrieve:zs({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:zs({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),fr=d.method,_h=d.extend({create:fr({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:fr({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:fr({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:fr({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),St=d.method,yh=d.extend({create:St({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:St({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:St({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:St({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:St({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),Ms=d.method,Ph=d.extend({retrieve:Ms({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Ms({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),We=d.method,Th=d.extend({create:We({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:We({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:We({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:We({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:We({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:We({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),$=d.method,Ns=d.extend({create:$({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return typeof e=="string"?$({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(e==null&&[].shift.apply([e,...t]),$({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:$({method:"POST",fullPath:"/v1/accounts/{account}"}),list:$({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:$({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:$({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:$({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:$({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:$({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:$({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:$({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:$({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:$({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:$({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:$({method:"GET",fullPath:"/v1/account"}),retrieveCapability:$({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:$({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:$({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:$({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:$({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:$({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),bh=d.method,Eh=d.extend({create:bh({method:"POST",fullPath:"/v1/account_links"})}),wh=d.method,Sh=d.extend({create:wh({method:"POST",fullPath:"/v1/account_sessions"})}),mr=d.method,xh=d.extend({create:mr({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:mr({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:mr({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:mr({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),Ye=d.method,Oh=d.extend({retrieve:Ye({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:Ye({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:Ye({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:Ye({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:Ye({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:Ye({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),kh=d.method,Ah=d.extend({retrieve:kh({method:"GET",fullPath:"/v1/balance"})}),Ds=d.method,Rh=d.extend({retrieve:Ds({method:"GET",fullPath:"/v1/balance_settings"}),update:Ds({method:"POST",fullPath:"/v1/balance_settings"})}),Gs=d.method,Ch=d.extend({retrieve:Gs({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:Gs({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),Xe=d.method,$h=d.extend({create:Xe({method:"POST",fullPath:"/v1/charges"}),retrieve:Xe({method:"GET",fullPath:"/v1/charges/{charge}"}),update:Xe({method:"POST",fullPath:"/v1/charges/{charge}"}),list:Xe({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:Xe({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:Xe({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),Ih=d.method,jh=d.extend({retrieve:Ih({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),qs=d.method,zh=d.extend({retrieve:qs({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:qs({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),xt=d.method,Mh=d.extend({create:xt({method:"POST",fullPath:"/v1/coupons"}),retrieve:xt({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:xt({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:xt({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:xt({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),ge=d.method,Nh=d.extend({create:ge({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:ge({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:ge({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:ge({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:ge({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:ge({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:ge({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:ge({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),Dh=d.method,Gh=d.extend({create:Dh({method:"POST",fullPath:"/v1/customer_sessions"})}),R=d.method,qh=d.extend({create:R({method:"POST",fullPath:"/v1/customers"}),retrieve:R({method:"GET",fullPath:"/v1/customers/{customer}"}),update:R({method:"POST",fullPath:"/v1/customers/{customer}"}),list:R({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:R({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:R({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:R({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:R({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:R({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:R({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:R({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:R({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:R({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:R({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:R({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:R({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:R({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:R({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:R({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:R({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:R({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:R({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:R({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:R({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:R({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:R({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:R({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:R({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),vr=d.method,Lh=d.extend({retrieve:vr({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:vr({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:vr({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:vr({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),Ls=d.method,Fh=d.extend({create:Ls({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:Ls({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),Fs=d.method,Hh=d.extend({retrieve:Fs({method:"GET",fullPath:"/v1/events/{id}"}),list:Fs({method:"GET",fullPath:"/v1/events",methodType:"list"})}),Hs=d.method,Uh=d.extend({retrieve:Hs({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:Hs({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),gr=d.method,Zh=d.extend({create:gr({method:"POST",fullPath:"/v1/file_links"}),retrieve:gr({method:"GET",fullPath:"/v1/file_links/{link}"}),update:gr({method:"POST",fullPath:"/v1/file_links/{link}"}),list:gr({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),Bh=(e,t,r)=>{const n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;const s=new TextEncoder;let o=new Uint8Array(0);const i=s.encode(`\r
`);function a(l){const h=o,p=l instanceof Uint8Array?l:new Uint8Array(s.encode(l));o=new Uint8Array(h.length+p.length+2),o.set(h),o.set(p,h.length),o.set(i,o.length-2)}function c(l){return`"${l.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const u=su(t);for(const l in u){if(!Object.prototype.hasOwnProperty.call(u,l))continue;const h=u[l];if(a(`--${n}`),Object.prototype.hasOwnProperty.call(h,"data")){const p=h;a(`Content-Disposition: form-data; name=${c(l)}; filename=${c(p.name||"blob")}`),a(`Content-Type: ${p.type||"application/octet-stream"}`),a(""),a(p.data)}else a(`Content-Disposition: form-data; name=${c(l)}`),a(""),a(h)}return a(`--${n}--`),o};function Jh(e,t,r,n){if(t=t||{},e!=="POST")return n(null,Gr(t));this._stripe._platformFunctions.tryBufferData(t).then(s=>{const o=Bh(e,s,r);return n(null,o)}).catch(s=>n(s,null))}const hn=d.method,Vh=d.extend({create:hn({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:hn({method:"GET",fullPath:"/v1/files/{file}"}),list:hn({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:Jh}),Ot=d.method,Kh=d.extend({create:Ot({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:Ot({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:Ot({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:Ot({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:Ot({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),Us=d.method,Wh=d.extend({retrieve:Us({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:Us({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})}),_r=d.method,Yh=d.extend({retrieve:_r({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:_r({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:_r({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:_r({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),q=d.method,Xh=d.extend({create:q({method:"POST",fullPath:"/v1/invoices"}),retrieve:q({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:q({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:q({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:q({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:q({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:q({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:q({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:q({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:q({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:q({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:q({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:q({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:q({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:q({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:q({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:q({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:q({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),Qh=d.method,ep=d.extend({retrieve:Qh({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),Zs=d.method,pn="connect.stripe.com",tp=d.extend({basePath:"/",authorizeUrl(e,t){e=e||{},t=t||{};let r="oauth/authorize";return t.express&&(r=`express/${r}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${pn}/${r}?${Gr(e)}`},token:Zs({method:"POST",path:"oauth/token",host:pn}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),Zs({method:"POST",path:"oauth/deauthorize",host:pn}).apply(this,[e,...t])}}),Bs=d.method,rp=d.extend({retrieve:Bs({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:Bs({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})}),X=d.method,np=d.extend({create:X({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:X({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:X({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:X({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:X({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:X({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:X({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:X({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:X({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:X({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:X({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:X({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),kt=d.method,sp=d.extend({create:kt({method:"POST",fullPath:"/v1/payment_links"}),retrieve:kt({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:kt({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:kt({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:kt({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),yr=d.method,op=d.extend({create:yr({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:yr({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:yr({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:yr({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),At=d.method,ip=d.extend({create:At({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:At({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:At({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:At({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:At({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),Qe=d.method,ap=d.extend({create:Qe({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:Qe({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:Qe({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:Qe({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:Qe({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:Qe({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),_e=d.method,cp=d.extend({retrieve:_e({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:_e({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:_e({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:_e({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:_e({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:_e({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:_e({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:_e({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})}),et=d.method,lp=d.extend({create:et({method:"POST",fullPath:"/v1/payouts"}),retrieve:et({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:et({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:et({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:et({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:et({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Rt=d.method,up=d.extend({create:Rt({method:"POST",fullPath:"/v1/plans"}),retrieve:Rt({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Rt({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Rt({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Rt({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),Ct=d.method,dp=d.extend({create:Ct({method:"POST",fullPath:"/v1/prices"}),retrieve:Ct({method:"GET",fullPath:"/v1/prices/{price}"}),update:Ct({method:"POST",fullPath:"/v1/prices/{price}"}),list:Ct({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:Ct({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),ae=d.method,hp=d.extend({create:ae({method:"POST",fullPath:"/v1/products"}),retrieve:ae({method:"GET",fullPath:"/v1/products/{id}"}),update:ae({method:"POST",fullPath:"/v1/products/{id}"}),list:ae({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:ae({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:ae({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:ae({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:ae({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:ae({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:ae({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),Pr=d.method,pp=d.extend({create:Pr({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Pr({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Pr({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Pr({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),ce=d.method,fp=d.extend({create:ce({method:"POST",fullPath:"/v1/quotes"}),retrieve:ce({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:ce({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:ce({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:ce({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:ce({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:ce({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:ce({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:ce({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:ce({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),$t=d.method,mp=d.extend({create:$t({method:"POST",fullPath:"/v1/refunds"}),retrieve:$t({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:$t({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:$t({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:$t({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),fn=d.method,vp=d.extend({retrieve:fn({method:"GET",fullPath:"/v1/reviews/{review}"}),list:fn({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:fn({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),gp=d.method,_p=d.extend({list:gp({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),Ie=d.method,yp=d.extend({create:Ie({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:Ie({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:Ie({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:Ie({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:Ie({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:Ie({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:Ie({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),Tr=d.method,Pp=d.extend({create:Tr({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:Tr({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:Tr({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:Tr({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),It=d.method,Tp=d.extend({create:It({method:"POST",fullPath:"/v1/sources"}),retrieve:It({method:"GET",fullPath:"/v1/sources/{source}"}),update:It({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:It({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:It({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),jt=d.method,bp=d.extend({create:jt({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:jt({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:jt({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:jt({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:jt({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})}),tt=d.method,Ep=d.extend({create:tt({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:tt({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:tt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:tt({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:tt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:tt({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),ue=d.method,wp=d.extend({create:ue({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ue({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ue({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ue({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ue({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ue({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:ue({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:ue({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ue({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),Js=d.method,Sp=d.extend({retrieve:Js({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:Js({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),br=d.method,xp=d.extend({create:br({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:br({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:br({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:br({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),Er=d.method,Op=d.extend({create:Er({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Er({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Er({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Er({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),Vs=d.method,kp=d.extend({create:Vs({method:"POST",fullPath:"/v1/tokens"}),retrieve:Vs({method:"GET",fullPath:"/v1/tokens/{token}"})}),zt=d.method,Ap=d.extend({create:zt({method:"POST",fullPath:"/v1/topups"}),retrieve:zt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:zt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:zt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:zt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),ye=d.method,Rp=d.extend({create:ye({method:"POST",fullPath:"/v1/transfers"}),retrieve:ye({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:ye({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:ye({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:ye({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:ye({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:ye({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:ye({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),Mt=d.method,Cp=d.extend({create:Mt({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:Mt({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:Mt({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:Mt({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:Mt({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),$p=C("apps",{Secrets:nh}),Ip=C("billing",{Alerts:Du,CreditBalanceSummary:ed,CreditBalanceTransactions:td,CreditGrants:rd,MeterEventAdjustments:gd,MeterEvents:Sd,Meters:kd}),jp=C("billingPortal",{Configurations:Ju,Sessions:oh}),zp=C("checkout",{Sessions:ih}),Mp=C("climate",{Orders:Cd,Products:Ld,Suppliers:lh}),Np=C("entitlements",{ActiveEntitlements:Nu,Features:dd}),Dp=C("financialConnections",{Accounts:Iu,Sessions:ah,Transactions:ph}),Gp=C("forwarding",{Requests:th}),qp=C("identity",{VerificationReports:Ph,VerificationSessions:Th}),Lp=C("issuing",{Authorizations:Lu,Cardholders:Uu,Cards:Zu,Disputes:ad,PersonalizationDesigns:Dd,PhysicalBundles:qd,Tokens:dh,Transactions:fh}),Fp=C("radar",{EarlyFraudWarnings:cd,PaymentEvaluations:Nd,ValueListItems:_h,ValueLists:yh}),Hp=C("reporting",{ReportRuns:Qd,ReportTypes:eh}),Up=C("sigma",{ScheduledQueryRuns:rh}),Zp=C("tax",{Associations:qu,Calculations:Hu,Registrations:Xd,Settings:ch,Transactions:mh}),Bp=C("terminal",{Configurations:Vu,ConnectionTokens:Xu,Locations:md,OnboardingLinks:Rd,Readers:Fd}),Jp=C("testHelpers",{ConfirmationTokens:Wu,Customers:od,Refunds:Yd,TestClocks:uh,Issuing:C("issuing",{Authorizations:Fu,Cards:Bu,PersonalizationDesigns:Gd,Transactions:vh}),Terminal:C("terminal",{Readers:Hd}),Treasury:C("treasury",{InboundTransfers:pd,OutboundPayments:$d,OutboundTransfers:jd,ReceivedCredits:Zd,ReceivedDebits:Vd})}),Vp=C("treasury",{CreditReversals:nd,DebitReversals:id,FinancialAccounts:hd,InboundTransfers:fd,OutboundPayments:Id,OutboundTransfers:zd,ReceivedCredits:Bd,ReceivedDebits:Kd,TransactionEntries:hh,Transactions:gh}),Kp=C("v2",{Billing:C("billing",{MeterEventAdjustments:yd,MeterEventSession:Td,MeterEventStream:Ed,MeterEvents:Od}),Core:C("core",{AccountLinks:Cu,AccountTokens:$u,Accounts:Mu,EventDestinations:ld,Events:ud})}),wr=Object.freeze(Object.defineProperty({__proto__:null,Account:Ns,AccountLinks:Eh,AccountSessions:Sh,Accounts:Ns,ApplePayDomains:xh,ApplicationFees:Oh,Apps:$p,Balance:Ah,BalanceSettings:Rh,BalanceTransactions:Ch,Billing:Ip,BillingPortal:jp,Charges:$h,Checkout:zp,Climate:Mp,ConfirmationTokens:jh,CountrySpecs:zh,Coupons:Mh,CreditNotes:Nh,CustomerSessions:Gh,Customers:qh,Disputes:Lh,Entitlements:Np,EphemeralKeys:Fh,Events:Hh,ExchangeRates:Uh,FileLinks:Zh,Files:Vh,FinancialConnections:Dp,Forwarding:Gp,Identity:qp,InvoiceItems:Kh,InvoicePayments:Wh,InvoiceRenderingTemplates:Yh,Invoices:Xh,Issuing:Lp,Mandates:ep,OAuth:tp,PaymentAttemptRecords:rp,PaymentIntents:np,PaymentLinks:sp,PaymentMethodConfigurations:op,PaymentMethodDomains:ip,PaymentMethods:ap,PaymentRecords:cp,Payouts:lp,Plans:up,Prices:dp,Products:hp,PromotionCodes:pp,Quotes:fp,Radar:Fp,Refunds:mp,Reporting:Hp,Reviews:vp,SetupAttempts:_p,SetupIntents:yp,ShippingRates:Pp,Sigma:Up,Sources:Tp,SubscriptionItems:bp,SubscriptionSchedules:Ep,Subscriptions:wp,Tax:Zp,TaxCodes:Sp,TaxIds:xp,TaxRates:Op,Terminal:Bp,TestHelpers:Jp,Tokens:kp,Topups:Ap,Transfers:Rp,Treasury:Vp,V2:Kp,WebhookEndpoints:Cp},Symbol.toStringTag,{value:"Module"})),Ks="api.stripe.com",Ws="443",Ys="/v1/",Xs=fi,Qs=8e4,eo=5,to=.5,Wp=["name","version","url","partner_id"],ro=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Yp=e=>new qt(e,d.MAX_BUFFERED_REQUEST_METRICS);function Xp(e,t=Yp){r.PACKAGE_VERSION="20.3.1",r.API_VERSION=fi,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},ou()),r.StripeResource=d,r.StripeContext=Me,r.resources=wr,r.HttpClient=ee,r.HttpClientResponse=ti,r.CryptoProvider=ri,r.webhooks=ku(e);function r(n,s={}){if(!(this instanceof r))return new r(n,s);const o=this._getPropsFromConfig(s);this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const i=o.httpAgent||null;this._api={host:o.host||Ks,port:o.port||Ws,protocol:o.protocol||"https",basePath:Ys,version:o.apiVersion||Xs,timeout:Yr("timeout",o.timeout,Qs),maxNetworkRetries:Yr("maxNetworkRetries",o.maxNetworkRetries,2),agent:i,httpClient:o.httpClient||(i?this._platformFunctions.createNodeHttpClient(i):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:o.stripeAccount||null,stripeContext:o.stripeContext||null};const a=o.typescript||!1;a!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=a),o.appInfo&&this._setAppInfo(o.appInfo),this._prepResources(),this._setAuthenticator(n,o.authenticator),this.errors=_s,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=o.telemetry!==!1,this._requestSender=t(this),this.StripeResource=r.StripeResource}return r.errors=_s,r.createNodeHttpClient=e.createNodeHttpClient,r.createFetchHttpClient=e.createFetchHttpClient,r.createNodeCryptoProvider=e.createNodeCryptoProvider,r.createSubtleCryptoProvider=e.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(n,s,o,i){return this._requestSender._rawRequest(n,s,o,i)},_setAuthenticator(n,s){if(n&&s)throw new Error("Can't specify both apiKey and authenticator");if(!n&&!s)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=n?bn(n):s},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=Wp.reduce((s,o)=>(typeof n[o]=="string"&&(s=s||{},s[o]=n[o]),s),{})},_setApiField(n,s){this._api[n]=s},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:n=>{switch(n){case"DEFAULT_HOST":return Ks;case"DEFAULT_PORT":return Ws;case"DEFAULT_BASE_PATH":return Ys;case"DEFAULT_API_VERSION":return Xs;case"DEFAULT_TIMEOUT":return Qs;case"MAX_NETWORK_RETRY_DELAY_SEC":return eo;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return to}return r[n]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,s,o){const i=Yr(n,s,o);this._setApiField(n,i)},getMaxNetworkRetryDelay(){return eo},getInitialNetworkRetryDelay(){return to},getClientUserAgent(n){return this.getClientUserAgentSeeded(r.USER_AGENT,n)},getClientUserAgentSeeded(n,s){this._platformFunctions.getUname().then(o=>{var i;const a={};for(const u in n)Object.prototype.hasOwnProperty.call(n,u)&&(a[u]=encodeURIComponent((i=n[u])!==null&&i!==void 0?i:"null"));a.uname=encodeURIComponent(o||"UNKNOWN");const c=this.getApiField("httpClient");c&&(a.httplib=encodeURIComponent(c.getClientName())),this._appInfo&&(a.application=this._appInfo),s(JSON.stringify(a))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const n in wr)Object.prototype.hasOwnProperty.call(wr,n)&&(this[ru(n)]=new wr[n](this))},_getPropsFromConfig(n){if(!n)return{};const s=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!s)throw new Error("Config must either be an object or a string");if(s)return{apiVersion:n};if(Object.keys(n).filter(a=>!ro.includes(a)).length>0)throw new Error(`Config object may only contain the following: ${ro.join(", ")}`);return n},parseEventNotification(n,s,o,i,a,c){const u=this.webhooks.constructEvent(n,s,o,i,a,c);return u.context&&(u.context=Me.parse(u.context)),u.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${u.id}`,void 0,{stripeContext:u.context},["fetch_event"]),u.fetchRelatedObject=()=>u.related_object?this._requestSender._rawRequest("GET",u.related_object.url,void 0,{stripeContext:u.context},["fetch_related_object"]):Promise.resolve(null),u}},r}const Qp=Xp(new fu);function Ln(e){return new Qp(e,{apiVersion:"2024-12-18.acacia"})}async function ef(e,t){return await e.checkout.sessions.create({payment_method_types:["card"],line_items:[{price_data:{currency:t.currency,unit_amount:t.price,product_data:{name:t.ticketName,description:`${t.eventTitle}`}},quantity:1}],mode:"payment",success_url:t.successUrl,cancel_url:t.cancelUrl,metadata:{event_id:t.eventId.toString(),ticket_id:t.ticketId.toString()},customer_email:void 0})}async function tf(e,t,r,n){return n.webhooks.constructEvent(e,t,r)}class oe{constructor(t){this.db=t}async getArtists(){return(await this.db.prepare("SELECT * FROM artists ORDER BY name").all()).results}async getArtistBySlug(t){return await this.db.prepare("SELECT * FROM artists WHERE slug = ?").bind(t).first()}async createArtist(t){return(await this.db.prepare("INSERT INTO artists (name, slug, description, image_url) VALUES (?, ?, ?, ?)").bind(t.name,t.slug,t.description,t.image_url).run()).meta.last_row_id||0}async getEvents(t){let r="SELECT * FROM events WHERE 1=1";const n=[];return t!=null&&t.artistId&&(r+=" AND artist_id = ?",n.push(t.artistId)),t!=null&&t.status&&(r+=" AND status = ?",n.push(t.status)),r+=" ORDER BY start_time DESC",(await this.db.prepare(r).bind(...n).all()).results}async getEventBySlug(t){return await this.db.prepare("SELECT * FROM events WHERE slug = ?").bind(t).first()}async getEventById(t){return await this.db.prepare("SELECT * FROM events WHERE id = ?").bind(t).first()}async createEvent(t){return(await this.db.prepare(`INSERT INTO events (artist_id, title, slug, description, thumbnail_url, event_type, 
       stream_url, archive_url, cloudfront_key_pair_id, start_time, end_time, status) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(t.artist_id,t.title,t.slug,t.description,t.thumbnail_url,t.event_type,t.stream_url,t.archive_url,t.cloudfront_key_pair_id,t.start_time,t.end_time,t.status).run()).meta.last_row_id||0}async updateEventStatus(t,r){await this.db.prepare("UPDATE events SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?").bind(r,t).run()}async getTicketsByEventId(t){return(await this.db.prepare("SELECT * FROM tickets WHERE event_id = ? AND is_active = 1 ORDER BY price").bind(t).all()).results}async getTicketById(t){return await this.db.prepare("SELECT * FROM tickets WHERE id = ?").bind(t).first()}async createTicket(t){return(await this.db.prepare(`INSERT INTO tickets (event_id, name, description, price, currency, stripe_product_id, 
       stripe_price_id, stock, sale_start, sale_end, is_active) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(t.event_id,t.name,t.description,t.price,t.currency,t.stripe_product_id,t.stripe_price_id,t.stock,t.sale_start,t.sale_end,t.is_active).run()).meta.last_row_id||0}async incrementTicketSoldCount(t){await this.db.prepare("UPDATE tickets SET sold_count = sold_count + 1 WHERE id = ?").bind(t).run()}async createPurchase(t){return(await this.db.prepare(`INSERT INTO purchases (event_id, ticket_id, stripe_customer_id, stripe_checkout_session_id, 
       stripe_payment_intent_id, customer_email, customer_name, amount, currency, status, 
       access_token, access_expires_at) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(t.event_id,t.ticket_id,t.stripe_customer_id,t.stripe_checkout_session_id,t.stripe_payment_intent_id,t.customer_email,t.customer_name,t.amount,t.currency,t.status,t.access_token,t.access_expires_at).run()).meta.last_row_id||0}async getPurchaseByCheckoutSession(t){return await this.db.prepare("SELECT * FROM purchases WHERE stripe_checkout_session_id = ?").bind(t).first()}async getPurchaseByAccessToken(t){return await this.db.prepare("SELECT * FROM purchases WHERE access_token = ? AND status = ?").bind(t,"completed").first()}async getPurchasesByCustomer(t){return(await this.db.prepare("SELECT * FROM purchases WHERE stripe_customer_id = ? ORDER BY purchased_at DESC").bind(t).all()).results}async updatePurchaseStatus(t,r){await this.db.prepare("UPDATE purchases SET status = ? WHERE stripe_checkout_session_id = ?").bind(r,t).run()}async updatePurchaseAccessToken(t,r,n){await this.db.prepare("UPDATE purchases SET access_token = ?, access_expires_at = ? WHERE stripe_checkout_session_id = ?").bind(r,n,t).run()}}var mi=e=>gi(e.replace(/_|-/g,t=>({_:"/","-":"+"})[t]??t)),vi=e=>rf(e).replace(/\/|\+/g,t=>({"/":"_","+":"-"})[t]??t),rf=e=>{let t="";const r=new Uint8Array(e);for(let n=0,s=r.length;n<s;n++)t+=String.fromCharCode(r[n]);return btoa(t)},gi=e=>{const t=atob(e),r=new Uint8Array(new ArrayBuffer(t.length)),n=t.length/2;for(let s=0,o=t.length-1;s<=n;s++,o--)r[s]=t.charCodeAt(s),r[o]=t.charCodeAt(o);return r},Lt=(e=>(e.HS256="HS256",e.HS384="HS384",e.HS512="HS512",e.RS256="RS256",e.RS384="RS384",e.RS512="RS512",e.PS256="PS256",e.PS384="PS384",e.PS512="PS512",e.ES256="ES256",e.ES384="ES384",e.ES512="ES512",e.EdDSA="EdDSA",e))(Lt||{}),nf={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},sf=()=>{var r,n;const e=globalThis;if(typeof navigator<"u"&&typeof navigator.userAgent=="string"){for(const[s,o]of Object.entries(nf))if(of(o))return s}return typeof(e==null?void 0:e.EdgeRuntime)=="string"?"edge-light":(e==null?void 0:e.fastly)!==void 0?"fastly":((n=(r=e==null?void 0:e.process)==null?void 0:r.release)==null?void 0:n.name)==="node"?"node":"other"},of=e=>navigator.userAgent.startsWith(e),af=class extends Error{constructor(e){super(`${e} is not an implemented algorithm`),this.name="JwtAlgorithmNotImplemented"}},no=class extends Error{constructor(){super('JWT verification requires "alg" option to be specified'),this.name="JwtAlgorithmRequired"}},cf=class extends Error{constructor(e,t){super(`JWT algorithm mismatch: expected "${e}", got "${t}"`),this.name="JwtAlgorithmMismatch"}},_i=class extends Error{constructor(e){super(`invalid JWT token: ${e}`),this.name="JwtTokenInvalid"}},lf=class extends Error{constructor(e){super(`token (${e}) is being used before it's valid`),this.name="JwtTokenNotBefore"}},uf=class extends Error{constructor(e){super(`token (${e}) expired`),this.name="JwtTokenExpired"}},df=class extends Error{constructor(e,t){super(`Invalid "iat" claim, must be a valid number lower than "${e}" (iat: "${t}")`),this.name="JwtTokenIssuedAt"}},mn=class extends Error{constructor(e,t){super(`expected issuer "${e}", got ${t?`"${t}"`:"none"} `),this.name="JwtTokenIssuer"}},hf=class extends Error{constructor(e){super(`jwt header is invalid: ${JSON.stringify(e)}`),this.name="JwtHeaderInvalid"}},pf=class extends Error{constructor(e){super(`token(${e}) signature mismatched`),this.name="JwtTokenSignatureMismatched"}},ff=class extends Error{constructor(e){super(`required "aud" in jwt payload: ${JSON.stringify(e)}`),this.name="JwtPayloadRequiresAud"}},mf=class extends Error{constructor(e,t){super(`expected audience "${Array.isArray(e)?e.join(", "):e}", got "${t}"`),this.name="JwtTokenAudience"}},Ut=(e=>(e.Encrypt="encrypt",e.Decrypt="decrypt",e.Sign="sign",e.Verify="verify",e.DeriveKey="deriveKey",e.DeriveBits="deriveBits",e.WrapKey="wrapKey",e.UnwrapKey="unwrapKey",e))(Ut||{}),Yt=new TextEncoder,vf=new TextDecoder;async function gf(e,t,r){const n=yi(t),s=await yf(e,n);return await crypto.subtle.sign(n,s,r)}async function _f(e,t,r,n){const s=yi(t),o=await Pf(e,s);return await crypto.subtle.verify(s,o,r,n)}function Sn(e){return gi(e.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function yf(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(Pi(e)){if(e.type!=="private"&&e.type!=="secret")throw new Error(`unexpected key type: CryptoKey.type is ${e.type}, expected private or secret`);return e}const r=[Ut.Sign];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,r):e.includes("PRIVATE")?await crypto.subtle.importKey("pkcs8",Sn(e),t,!1,r):await crypto.subtle.importKey("raw",Yt.encode(e),t,!1,r)}async function Pf(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(Pi(e)){if(e.type==="public"||e.type==="secret")return e;e=await so(e)}if(typeof e=="string"&&e.includes("PRIVATE")){const n=await crypto.subtle.importKey("pkcs8",Sn(e),t,!0,[Ut.Sign]);e=await so(n)}const r=[Ut.Verify];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,r):e.includes("PUBLIC")?await crypto.subtle.importKey("spki",Sn(e),t,!1,r):await crypto.subtle.importKey("raw",Yt.encode(e),t,!1,r)}async function so(e){if(e.type!=="private")throw new Error(`unexpected key type: ${e.type}`);if(!e.extractable)throw new Error("unexpected private key is unextractable");const t=await crypto.subtle.exportKey("jwk",e),{kty:r}=t,{alg:n,e:s,n:o}=t,{crv:i,x:a,y:c}=t;return{kty:r,alg:n,e:s,n:o,crv:i,x:a,y:c,key_ops:[Ut.Verify]}}function yi(e){switch(e){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new af(e)}}function Pi(e){return sf()==="node"&&crypto.webcrypto?e instanceof crypto.webcrypto.CryptoKey:e instanceof CryptoKey}var vn=e=>vi(Yt.encode(JSON.stringify(e)).buffer).replace(/=/g,""),Tf=e=>vi(e).replace(/=/g,""),oo=e=>JSON.parse(vf.decode(mi(e)));function bf(e){if(typeof e=="object"&&e!==null){const t=e;return"alg"in t&&Object.values(Lt).includes(t.alg)&&(!("typ"in t)||t.typ==="JWT")}return!1}var Ef=async(e,t,r="HS256")=>{const n=vn(e);let s;typeof t=="object"&&"alg"in t?(r=t.alg,s=vn({alg:r,typ:"JWT",kid:t.kid})):s=vn({alg:r,typ:"JWT"});const o=`${s}.${n}`,i=await gf(t,r,Yt.encode(o)),a=Tf(i);return`${o}.${a}`},wf=async(e,t,r)=>{if(!r)throw new no;const{alg:n,iss:s,nbf:o=!0,exp:i=!0,iat:a=!0,aud:c}=typeof r=="string"?{alg:r}:r;if(!n)throw new no;const u=e.split(".");if(u.length!==3)throw new _i(e);const{header:l,payload:h}=Sf(e);if(!bf(l))throw new hf(l);if(l.alg!==n)throw new cf(n,l.alg);const p=Date.now()/1e3|0;if(o&&h.nbf&&h.nbf>p)throw new lf(e);if(i&&h.exp&&h.exp<=p)throw new uf(e);if(a&&h.iat&&p<h.iat)throw new df(p,h.iat);if(s){if(!h.iss)throw new mn(s,null);if(typeof s=="string"&&h.iss!==s)throw new mn(s,h.iss);if(s instanceof RegExp&&!s.test(h.iss))throw new mn(s,h.iss)}if(c){if(!h.aud)throw new ff(h);if(!(Array.isArray(h.aud)?h.aud:[h.aud]).some(y=>c instanceof RegExp?c.test(y):typeof c=="string"?y===c:Array.isArray(c)&&c.includes(y)))throw new mf(c,h.aud)}const m=e.substring(0,e.lastIndexOf("."));if(!await _f(t,n,mi(u[2]),Yt.encode(m)))throw new pf(e);return h};Lt.HS256,Lt.HS384,Lt.HS512;var Sf=e=>{try{const[t,r]=e.split("."),n=oo(t),s=oo(r);return{header:n,payload:s}}catch{throw new _i(e)}},Ti={sign:Ef,verify:wf},xf=Ti.verify,Of=Ti.sign;async function kf(e,t,r=86400*30){const n=Math.floor(Date.now()/1e3)+r,s={...e,exp:n};return await Of(s,t)}async function Af(e,t){try{return await xf(e,t)}catch(r){return console.error("Token verification failed:",r),null}}const Lr=new ft,Rf=Sl({ticketId:ds(),eventId:ds()});Lr.post("/checkout",Oa("json",Rf),async e=>{try{const{ticketId:t,eventId:r}=e.req.valid("json"),n=Ln(e.env.STRIPE_SECRET_KEY),s=new oe(e.env.DB),o=await s.getTicketById(t),i=await s.getEventById(r);if(!o||!i)return e.json({error:"Ticket or event not found"},404);if(o.stock!==null&&o.sold_count>=o.stock)return e.json({error:"Ticket sold out"},400);const a=await ef(n,{ticketId:o.id,ticketName:o.name,price:o.price,currency:o.currency,eventId:i.id,eventTitle:i.title,successUrl:`${new URL(e.req.url).origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${new URL(e.req.url).origin}/events/${i.slug}`});return e.json({sessionId:a.id,url:a.url})}catch(t){return console.error("Checkout error:",t),e.json({error:"Failed to create checkout session",details:t.message},500)}});Lr.post("/webhook",async e=>{var t,r,n,s,o;try{const i=e.req.header("stripe-signature");if(!i)return e.json({error:"No signature"},400);const a=await e.req.text(),c=Ln(e.env.STRIPE_SECRET_KEY),u=await tf(a,i,e.env.STRIPE_WEBHOOK_SECRET,c),l=new oe(e.env.DB);switch(u.type){case"checkout.session.completed":{const h=u.data.object,p=parseInt(h.metadata.event_id),m=parseInt(h.metadata.ticket_id);if(await l.getPurchaseByCheckoutSession(h.id)){console.log("Purchase already exists:",h.id);break}const _=await kf({purchaseId:0,eventId:p,customerId:h.customer||((t=h.customer_details)==null?void 0:t.email)||"",email:((r=h.customer_details)==null?void 0:r.email)||""},e.env.JWT_SECRET,86400*365),g=new Date(Date.now()+86400*365*1e3).toISOString();await l.createPurchase({event_id:p,ticket_id:m,stripe_customer_id:h.customer||((n=h.customer_details)==null?void 0:n.email)||"",stripe_checkout_session_id:h.id,stripe_payment_intent_id:h.payment_intent,customer_email:((s=h.customer_details)==null?void 0:s.email)||"",customer_name:((o=h.customer_details)==null?void 0:o.name)||"",amount:h.amount_total,currency:h.currency,status:"completed",access_token:_,access_expires_at:g}),await l.incrementTicketSoldCount(m),console.log("Purchase completed:",h.id);break}case"charge.refunded":{const p=u.data.object.payment_intent;console.log("Charge refunded:",p);break}default:console.log(`Unhandled event type: ${u.type}`)}return e.json({received:!0})}catch(i){return console.error("Webhook error:",i),e.json({error:"Webhook handler failed",details:i.message},400)}});Lr.get("/checkout/:sessionId",async e=>{var t;try{const r=e.req.param("sessionId"),s=await Ln(e.env.STRIPE_SECRET_KEY).checkout.sessions.retrieve(r),i=await new oe(e.env.DB).getPurchaseByCheckoutSession(r);return e.json({status:s.payment_status,customerEmail:(t=s.customer_details)==null?void 0:t.email,purchase:i})}catch(r){return console.error("Session retrieval error:",r),e.json({error:"Failed to retrieve session",details:r.message},500)}});const Fr=new ft;Fr.get("/",async e=>{try{const t=e.req.query("artist"),r=e.req.query("status"),n=new oe(e.env.DB);let s={};if(t){const a=await n.getArtistBySlug(t);a&&(s.artistId=a.id)}r&&(s.status=r);const o=await n.getEvents(s),i=await Promise.all(o.map(async a=>{const c=await n.getArtistBySlug("");return a}));return e.json(i)}catch(t){return console.error("Get events error:",t),e.json({error:"Failed to get events",details:t.message},500)}});Fr.get("/:slug",async e=>{try{const t=e.req.param("slug"),r=new oe(e.env.DB),n=await r.getEventBySlug(t);if(!n)return e.json({error:"Event not found"},404);const s=await r.getTicketsByEventId(n.id);return e.json({...n,tickets:s})}catch(t){return console.error("Get event error:",t),e.json({error:"Failed to get event",details:t.message},500)}});Fr.get("/:slug/tickets",async e=>{try{const t=e.req.param("slug"),r=new oe(e.env.DB),n=await r.getEventBySlug(t);if(!n)return e.json({error:"Event not found"},404);const s=await r.getTicketsByEventId(n.id);return e.json(s)}catch(t){return console.error("Get tickets error:",t),e.json({error:"Failed to get tickets",details:t.message},500)}});const Fn=new ft;Fn.get("/",async e=>{try{const r=await new oe(e.env.DB).getArtists();return e.json(r)}catch(t){return console.error("Get artists error:",t),e.json({error:"Failed to get artists",details:t.message},500)}});Fn.get("/:slug",async e=>{try{const t=e.req.param("slug"),r=new oe(e.env.DB),n=await r.getArtistBySlug(t);if(!n)return e.json({error:"Artist not found"},404);const s=await r.getEvents({artistId:n.id});return e.json({...n,events:s})}catch(t){return console.error("Get artist error:",t),e.json({error:"Failed to get artist",details:t.message},500)}});async function Cf(e,t,r,n=3600){const s=Math.floor(Date.now()/1e3)+n,i=JSON.stringify({Statement:[{Resource:e,Condition:{DateLessThan:{"AWS:EpochTime":s}}}]}),a=btoa(i).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~"),u=(await bi(i)).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~"),l=e.includes("?")?"&":"?";return`${e}${l}Policy=${a}&Signature=${u}&Key-Pair-Id=${t}`}async function bi(e,t){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),o=Array.from(new Uint8Array(s));return btoa(String.fromCharCode(...o))}async function $f(e,t,r,n=3600){const s=Math.floor(Date.now()/1e3)+n,i=JSON.stringify({Statement:[{Resource:e,Condition:{DateLessThan:{"AWS:EpochTime":s}}}]}),a=btoa(i).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~"),u=(await bi(i)).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~");return{"CloudFront-Policy":a,"CloudFront-Signature":u,"CloudFront-Key-Pair-Id":t}}const Hr=new ft;Hr.post("/verify",async e=>{try{const{token:t}=await e.req.json();if(!t)return e.json({error:"Token required"},400);const r=new oe(e.env.DB),n=await r.getPurchaseByAccessToken(t);if(!n)return e.json({error:"Invalid or expired token"},401);if(!await Af(t,e.env.JWT_SECRET))return e.json({error:"Invalid token"},401);if(n.access_expires_at&&new Date(n.access_expires_at)<new Date)return e.json({error:"Token expired"},401);const o=await r.getEventById(n.event_id);return o?e.json({valid:!0,purchase:{id:n.id,eventId:n.event_id,customerEmail:n.customer_email},event:{id:o.id,title:o.title,slug:o.slug,eventType:o.event_type,status:o.status}}):e.json({error:"Event not found"},404)}catch(t){return console.error("Token verification error:",t),e.json({error:"Verification failed",details:t.message},500)}});Hr.post("/stream-url",async e=>{try{const{token:t,eventId:r}=await e.req.json();if(!t||!r)return e.json({error:"Token and eventId required"},400);const n=new oe(e.env.DB),s=await n.getPurchaseByAccessToken(t);if(!s||s.event_id!==r)return e.json({error:"Invalid access"},401);const o=await n.getEventById(r);if(!o)return e.json({error:"Event not found"},404);const i=o.event_type==="archive"?o.archive_url:o.stream_url;if(!i)return e.json({error:"Stream URL not available"},404);if(e.env.CLOUDFRONT_PRIVATE_KEY&&e.env.CLOUDFRONT_KEY_PAIR_ID){const a=await Cf(i,e.env.CLOUDFRONT_KEY_PAIR_ID,e.env.CLOUDFRONT_PRIVATE_KEY,3600);return e.json({streamUrl:a,expiresIn:3600,useSigned:!0})}return e.json({streamUrl:i,expiresIn:0,useSigned:!1})}catch(t){return console.error("Stream URL generation error:",t),e.json({error:"Failed to generate stream URL",details:t.message},500)}});Hr.post("/stream-cookies",async e=>{try{const{token:t,eventId:r}=await e.req.json();if(!t||!r)return e.json({error:"Token and eventId required"},400);const n=new oe(e.env.DB),s=await n.getPurchaseByAccessToken(t);if(!s||s.event_id!==r)return e.json({error:"Invalid access"},401);const o=await n.getEventById(r);if(!o)return e.json({error:"Event not found"},404);const i=o.event_type==="archive"?o.archive_url:o.stream_url;if(!i)return e.json({error:"Stream URL not available"},404);if(e.env.CLOUDFRONT_PRIVATE_KEY&&e.env.CLOUDFRONT_KEY_PAIR_ID){const a=new URL(i),c=`${a.origin}${a.pathname.split("/").slice(0,-1).join("/")}/*`,u=await $f(c,e.env.CLOUDFRONT_KEY_PAIR_ID,e.env.CLOUDFRONT_PRIVATE_KEY,3600);return e.json({cookies:u,domain:a.hostname,path:"/",expiresIn:3600})}return e.json({error:"CloudFront signing not configured"},500)}catch(t){return console.error("Stream cookies generation error:",t),e.json({error:"Failed to generate stream cookies",details:t.message},500)}});const K=new ft;K.use("/api/*",ia());K.use("/static/*",va({root:"./public"}));K.route("/api/stripe",Lr);K.route("/api/events",Fr);K.route("/api/artists",Fn);K.route("/api/watch",Hr);K.get("/api/health",e=>e.json({status:"ok",timestamp:new Date().toISOString()}));K.get("/",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <span class="text-white text-xl font-bold">StreamingPlatform</span>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center mb-16">
                <h1 class="text-5xl font-bold text-white mb-4">
                    <br>
                </h1>
                <p class="text-xl text-gray-300 mb-8">
                    
                </p>
                <div class="flex justify-center space-x-4">
                    <a href="/events" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-lg transition">
                        <i class="fas fa-calendar-alt mr-2"></i>
                        
                    </a>
                    <a href="/artists" class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition">
                        <i class="fas fa-users mr-2"></i>
                        
                    </a>
                </div>
            </div>

            <div id="upcoming-events" class="mb-12">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-fire text-orange-500 mr-2"></i>
                    
                </h2>
                <div id="events-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                        <p>...</p>
                    </div>
                </div>
            </div>

            <div class="bg-black bg-opacity-40 backdrop-blur-md rounded-xl p-8 border border-gray-800">
                <h2 class="text-2xl font-bold text-white mb-4">
                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                    
                </h2>
                <div class="grid md:grid-cols-3 gap-6 text-gray-300">
                    <div>
                        <i class="fas fa-video text-purple-500 text-3xl mb-2"></i>
                        <h3 class="font-bold text-white mb-2"></h3>
                        <p>AWS + CloudFront</p>
                    </div>
                    <div>
                        <i class="fas fa-lock text-purple-500 text-3xl mb-2"></i>
                        <h3 class="font-bold text-white mb-2"></h3>
                        <p>DRMURL</p>
                    </div>
                    <div>
                        <i class="fas fa-credit-card text-purple-500 text-3xl mb-2"></i>
                        <h3 class="font-bold text-white mb-2"></h3>
                        <p>Stripe</p>
                    </div>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            // Load upcoming events
            async function loadEvents() {
                try {
                    const response = await axios.get('/api/events?status=upcoming');
                    const events = response.data;
                    
                    const eventsContainer = document.getElementById('events-list');
                    
                    if (events.length === 0) {
                        eventsContainer.innerHTML = \`
                            <div class="col-span-full text-center text-gray-400 py-8">
                                <i class="fas fa-calendar-times text-4xl mb-2"></i>
                                <p></p>
                            </div>
                        \`;
                        return;
                    }
                    
                    eventsContainer.innerHTML = events.map(event => \`
                        <a href="/events/\${event.slug}" class="block bg-black bg-opacity-40 backdrop-blur-md rounded-xl overflow-hidden border border-gray-800 hover:border-purple-500 transition">
                            <div class="aspect-video bg-gray-800 relative">
                                <img src="\${event.thumbnail_url || 'https://via.placeholder.com/800x450'}" 
                                     alt="\${event.title}" 
                                     class="w-full h-full object-cover">
                                <div class="absolute top-2 right-2 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-bold">
                                    <i class="fas fa-circle animate-pulse mr-1"></i>
                                    UPCOMING
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="text-white font-bold text-lg mb-2">\${event.title}</h3>
                                <p class="text-gray-400 text-sm mb-2">
                                    <i class="fas fa-clock mr-1"></i>
                                    \${event.start_time ? new Date(event.start_time).toLocaleString('ja-JP') : ''}
                                </p>
                                <p class="text-gray-500 text-sm line-clamp-2">\${event.description || ''}</p>
                            </div>
                        </a>
                    \`).join('');
                } catch (error) {
                    console.error('Failed to load events:', error);
                    document.getElementById('events-list').innerHTML = \`
                        <div class="col-span-full text-center text-red-400 py-8">
                            <i class="fas fa-exclamation-triangle text-4xl mb-2"></i>
                            <p></p>
                        </div>
                    \`;
                }
            }
            
            loadEvents();
        <\/script>
    </body>
    </html>
  `));K.get("/events",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/events" class="text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-white mb-4">
                    <i class="fas fa-calendar-alt text-purple-500 mr-2"></i>
                    
                </h1>
                <div class="flex space-x-4">
                    <button onclick="filterEvents('all')" class="filter-btn active bg-purple-600 text-white px-4 py-2 rounded-lg"></button>
                    <button onclick="filterEvents('upcoming')" class="filter-btn bg-gray-800 text-white px-4 py-2 rounded-lg"></button>
                    <button onclick="filterEvents('archived')" class="filter-btn bg-gray-800 text-white px-4 py-2 rounded-lg"></button>
                </div>
            </div>

            <div id="events-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="/static/events.js"><\/script>
    </body>
    </html>
  `));K.get("/events/:slug",async e=>{const t=e.req.param("slug");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <script src="https://js.stripe.com/v3/"><\/script>
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="event-detail">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            const eventSlug = '${t}';
        <\/script>
        <script src="/static/event-detail.js"><\/script>
    </body>
    </html>
  `)});K.get("/artists",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <h1 class="text-4xl font-bold text-white mb-8">
                <i class="fas fa-users text-purple-500 mr-2"></i>
                
            </h1>

            <div id="artists-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="/static/artists.js"><\/script>
    </body>
    </html>
  `));K.get("/artists/:slug",e=>{const t=e.req.param("slug");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="artist-detail">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            const artistSlug = '${t}';
        <\/script>
        <script src="/static/artist-detail.js"><\/script>
    </body>
    </html>
  `)});K.get("/watch/:eventSlug",e=>{const t=e.req.param("eventSlug"),r=e.req.query("token");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
    </head>
    <body class="bg-black min-h-screen">
        <div id="watch-container">
            <div class="text-center text-gray-400 py-8">
                <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                <p>...</p>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="https://vjs.zencdn.net/8.10.0/video.min.js"><\/script>
        <script>
            const eventSlug = '${t}';
            const accessToken = '${r||""}';
        <\/script>
        <script src="/static/watch.js"><\/script>
    </body>
    </html>
  `)});K.get("/success",e=>{const t=e.req.query("session_id");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="success-content">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            const sessionId = '${t||""}';
        <\/script>
        <script src="/static/success.js"><\/script>
    </body>
    </html>
  `)});const io=new ft,If=Object.assign({"/src/index.tsx":K});let Ei=!1;for(const[,e]of Object.entries(If))e&&(io.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),io.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Ei=!0);if(!Ei)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");export{io as default};

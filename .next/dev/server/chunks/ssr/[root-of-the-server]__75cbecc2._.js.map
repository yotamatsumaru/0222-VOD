{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/lib/db.ts"],"sourcesContent":["import { Pool, QueryResult, QueryResultRow } from 'pg';\n\nlet pool: Pool | null = null;\n\nexport function getDatabase(): Pool {\n  if (!pool) {\n    pool = new Pool({\n      connectionString: process.env.DATABASE_URL,\n      max: 20,\n      idleTimeoutMillis: 30000,\n      connectionTimeoutMillis: 2000,\n    });\n  }\n  return pool;\n}\n\nexport async function query<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<QueryResult<T>> {\n  const db = getDatabase();\n  return db.query<T>(text, params);\n}\n\nexport async function getOne<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T | null> {\n  const result = await query<T>(text, params);\n  return result.rows[0] || null;\n}\n\nexport async function getAll<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T[]> {\n  const result = await query<T>(text, params);\n  return result.rows;\n}\n\nexport async function insert<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T> {\n  const result = await query<T>(text, params);\n  return result.rows[0];\n}\n\nexport async function update<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T | null> {\n  const result = await query<T>(text, params);\n  return result.rows[0] || null;\n}\n\nexport async function remove(text: string, params?: any[]): Promise<boolean> {\n  const result = await query(text, params);\n  return result.rowCount !== null && result.rowCount > 0;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAI,OAAoB;AAEjB,SAAS;IACd,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,qJAAI,CAAC;YACd,kBAAkB,QAAQ,GAAG,CAAC,YAAY;YAC1C,KAAK;YACL,mBAAmB;YACnB,yBAAyB;QAC3B;IACF;IACA,OAAO;AACT;AAEO,eAAe,MACpB,IAAY,EACZ,MAAc;IAEd,MAAM,KAAK;IACX,OAAO,GAAG,KAAK,CAAI,MAAM;AAC3B;AAEO,eAAe,OACpB,IAAY,EACZ,MAAc;IAEd,MAAM,SAAS,MAAM,MAAS,MAAM;IACpC,OAAO,OAAO,IAAI,CAAC,EAAE,IAAI;AAC3B;AAEO,eAAe,OACpB,IAAY,EACZ,MAAc;IAEd,MAAM,SAAS,MAAM,MAAS,MAAM;IACpC,OAAO,OAAO,IAAI;AACpB;AAEO,eAAe,OACpB,IAAY,EACZ,MAAc;IAEd,MAAM,SAAS,MAAM,MAAS,MAAM;IACpC,OAAO,OAAO,IAAI,CAAC,EAAE;AACvB;AAEO,eAAe,OACpB,IAAY,EACZ,MAAc;IAEd,MAAM,SAAS,MAAM,MAAS,MAAM;IACpC,OAAO,OAAO,IAAI,CAAC,EAAE,IAAI;AAC3B;AAEO,eAAe,OAAO,IAAY,EAAE,MAAc;IACvD,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,OAAO,OAAO,QAAQ,KAAK,QAAQ,OAAO,QAAQ,GAAG;AACvD"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/EventCard.tsx"],"sourcesContent":["import Link from 'next/link';\nimport Image from 'next/image';\nimport { Event } from '@/lib/types';\nimport { format } from 'date-fns';\nimport { ja } from 'date-fns/locale';\n\ninterface EventCardProps {\n  event: Event & { artist_name?: string };\n}\n\nexport default function EventCard({ event }: EventCardProps) {\n  const isLive = event.status === 'live';\n  const badgeColor = isLive ? 'bg-red-600 animate-pulse' : 'bg-blue-600';\n  const badgeText = isLive ? 'LIVE' : '配信予定';\n  const borderClass = isLive\n    ? 'border-red-500 ring-2 ring-red-500/50'\n    : 'border-gray-800 hover:border-purple-500';\n\n  return (\n    <Link\n      href={`/events/${event.slug}`}\n      className={`block bg-black bg-opacity-40 backdrop-blur-md rounded-xl overflow-hidden border ${borderClass} transition hover:scale-105 duration-300`}\n    >\n      <div className=\"aspect-video bg-gray-800 relative\">\n        {event.thumbnail_url ? (\n          <Image\n            src={event.thumbnail_url}\n            alt={event.title}\n            fill\n            className=\"object-cover\"\n          />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center\">\n            <i className=\"fas fa-image text-gray-600 text-4xl\"></i>\n          </div>\n        )}\n        <div\n          className={`${badgeColor} text-white px-3 py-1 rounded-full text-sm font-bold absolute top-2 right-2`}\n        >\n          {isLive && <i className=\"fas fa-circle text-xs mr-1\"></i>}\n          {badgeText}\n        </div>\n      </div>\n      <div className=\"p-4\">\n        <h3 className=\"text-white font-bold text-lg mb-2 line-clamp-2\">\n          {event.title}\n        </h3>\n        {event.start_time && (\n          <p className=\"text-gray-400 text-sm mb-2\">\n            <i className=\"fas fa-clock mr-1\"></i>\n            {format(new Date(event.start_time), 'yyyy年M月d日(E) HH:mm', {\n              locale: ja,\n            })}\n          </p>\n        )}\n        {event.description && (\n          <p className=\"text-gray-500 text-sm line-clamp-2\">\n            {event.description}\n          </p>\n        )}\n      </div>\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;AACA;;;;;;AAMe,SAAS,UAAU,EAAE,KAAK,EAAkB;IACzD,MAAM,SAAS,MAAM,MAAM,KAAK;IAChC,MAAM,aAAa,SAAS,6BAA6B;IACzD,MAAM,YAAY,SAAS,SAAS;IACpC,MAAM,cAAc,SAChB,0CACA;IAEJ,qBACE,8OAAC,0LAAI;QACH,MAAM,CAAC,QAAQ,EAAE,MAAM,IAAI,EAAE;QAC7B,WAAW,CAAC,gFAAgF,EAAE,YAAY,wCAAwC,CAAC;;0BAEnJ,8OAAC;gBAAI,WAAU;;oBACZ,MAAM,aAAa,iBAClB,8OAAC,wIAAK;wBACJ,KAAK,MAAM,aAAa;wBACxB,KAAK,MAAM,KAAK;wBAChB,IAAI;wBACJ,WAAU;;;;;6CAGZ,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;;;;;;;;;;;kCAGjB,8OAAC;wBACC,WAAW,GAAG,WAAW,2EAA2E,CAAC;;4BAEpG,wBAAU,8OAAC;gCAAE,WAAU;;;;;;4BACvB;;;;;;;;;;;;;0BAGL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX,MAAM,KAAK;;;;;;oBAEb,MAAM,UAAU,kBACf,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;gCAAE,WAAU;;;;;;4BACZ,IAAA,+JAAM,EAAC,IAAI,KAAK,MAAM,UAAU,GAAG,sBAAsB;gCACxD,QAAQ,iJAAE;4BACZ;;;;;;;oBAGH,MAAM,WAAW,kBAChB,8OAAC;wBAAE,WAAU;kCACV,MAAM,WAAW;;;;;;;;;;;;;;;;;;AAM9B"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/Navigation.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/Navigation.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/Navigation.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","ignoreList":[0]}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/Navigation.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/Navigation.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/Navigation.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyQ,GACtS,uCACA","ignoreList":[0]}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/app/page.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { getAll } from '@/lib/db';\nimport { Event } from '@/lib/types';\nimport EventCard from '@/components/EventCard';\nimport Navigation from '@/components/Navigation';\n\nexport const dynamic = 'force-dynamic';\n\nasync function getUpcomingEvents(): Promise<Event[]> {\n  try {\n    const events = await getAll<Event>(`\n      SELECT e.*, a.name as artist_name\n      FROM events e\n      LEFT JOIN artists a ON e.artist_id = a.id\n      WHERE e.status IN ('upcoming', 'live')\n      ORDER BY \n        CASE WHEN e.status = 'live' THEN 0 ELSE 1 END,\n        e.start_time ASC\n      LIMIT 6\n    `);\n    return events;\n  } catch (error) {\n    console.error('Failed to fetch events:', error);\n    return [];\n  }\n}\n\nexport default async function HomePage() {\n  const events = await getUpcomingEvents();\n\n  return (\n    <>\n      <Navigation />\n      \n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"text-center mb-16\">\n          <h1 className=\"text-3xl md:text-5xl font-bold text-white mb-4\">\n            ライブ配信・ストリーミング\n            <br />\n            プラットフォーム\n          </h1>\n          <p className=\"text-base md:text-xl text-gray-300 mb-8\">\n            お気に入りのアーティストのライブをどこでも視聴\n          </p>\n          <div className=\"flex flex-col sm:flex-row justify-center gap-4\">\n            <Link\n              href=\"/events\"\n              className=\"bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-lg transition\"\n            >\n              <i className=\"fas fa-calendar-alt mr-2\"></i>\n              イベント一覧\n            </Link>\n            <Link\n              href=\"/artists\"\n              className=\"bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition\"\n            >\n              <i className=\"fas fa-users mr-2\"></i>\n              アーティスト一覧\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"mb-12\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-6\">\n            <i className=\"fas fa-fire text-orange-500 mr-2\"></i>\n            今後のライブ\n          </h2>\n          {events.length > 0 ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {events.map((event) => (\n                <EventCard key={event.id} event={event} />\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center text-gray-400 py-8\">\n              <i className=\"fas fa-calendar-times text-4xl mb-2\"></i>\n              <p>現在、予定されているライブはありません</p>\n            </div>\n          )}\n        </div>\n\n        <div className=\"bg-black bg-opacity-40 backdrop-blur-md rounded-xl p-6 md:p-8 border border-gray-800\">\n          <h2 className=\"text-xl md:text-2xl font-bold text-white mb-4\">\n            <i className=\"fas fa-info-circle text-blue-500 mr-2\"></i>\n            プラットフォームについて\n          </h2>\n          <div className=\"grid md:grid-cols-3 gap-6 text-gray-300\">\n            <div>\n              <i className=\"fas fa-video text-purple-500 text-2xl md:text-3xl mb-2\"></i>\n              <h3 className=\"font-bold text-white mb-2 text-base md:text-lg\">\n                高品質配信\n              </h3>\n              <p className=\"text-sm md:text-base\">\n                AWS + CloudFrontによる安定した配信\n              </p>\n            </div>\n            <div>\n              <i className=\"fas fa-lock text-purple-500 text-2xl md:text-3xl mb-2\"></i>\n              <h3 className=\"font-bold text-white mb-2 text-base md:text-lg\">\n                セキュア\n              </h3>\n              <p className=\"text-sm md:text-base\">DRM保護と署名付きURL</p>\n            </div>\n            <div>\n              <i className=\"fas fa-credit-card text-purple-500 text-2xl md:text-3xl mb-2\"></i>\n              <h3 className=\"font-bold text-white mb-2 text-base md:text-lg\">\n                簡単決済\n              </h3>\n              <p className=\"text-sm md:text-base\">Stripeによる安全な決済</p>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <footer className=\"bg-black bg-opacity-50 border-t border-gray-800 mt-20 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center text-gray-400\">\n            <p>&copy; 2024 StreamingPlatform. All rights reserved.</p>\n          </div>\n        </div>\n      </footer>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;AACA;;;;;;;;;;AAEO,MAAM,UAAU;AAEvB,eAAe;IACb,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,mHAAM,EAAQ,CAAC;;;;;;;;;IASpC,CAAC;QACD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACX;AACF;AAEe,eAAe;IAC5B,MAAM,SAAS,MAAM;IAErB,qBACE;;0BACE,8OAAC,oIAAU;;;;;0BAEX,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAAiD;kDAE7D,8OAAC;;;;;oCAAK;;;;;;;0CAGR,8OAAC;gCAAE,WAAU;0CAA0C;;;;;;0CAGvD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0LAAI;wCACH,MAAK;wCACL,WAAU;;0DAEV,8OAAC;gDAAE,WAAU;;;;;;4CAA+B;;;;;;;kDAG9C,8OAAC,0LAAI;wCACH,MAAK;wCACL,WAAU;;0DAEV,8OAAC;gDAAE,WAAU;;;;;;4CAAwB;;;;;;;;;;;;;;;;;;;kCAM3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAE,WAAU;;;;;;oCAAuC;;;;;;;4BAGrD,OAAO,MAAM,GAAG,kBACf,8OAAC;gCAAI,WAAU;0CACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC,mIAAS;wCAAgB,OAAO;uCAAjB,MAAM,EAAE;;;;;;;;;qDAI5B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;;;;;;kDACb,8OAAC;kDAAE;;;;;;;;;;;;;;;;;;kCAKT,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAE,WAAU;;;;;;oCAA4C;;;;;;;0CAG3D,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;;;;;;0DACb,8OAAC;gDAAG,WAAU;0DAAiD;;;;;;0DAG/D,8OAAC;gDAAE,WAAU;0DAAuB;;;;;;;;;;;;kDAItC,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;;;;;;0DACb,8OAAC;gDAAG,WAAU;0DAAiD;;;;;;0DAG/D,8OAAC;gDAAE,WAAU;0DAAuB;;;;;;;;;;;;kDAEtC,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;;;;;;0DACb,8OAAC;gDAAG,WAAU;0DAAiD;;;;;;0DAG/D,8OAAC;gDAAE,WAAU;0DAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAM5C,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAMf"}}]
}
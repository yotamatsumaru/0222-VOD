{"version":3,"sources":["../../../lib/db.ts","../../../lib/email.ts","../../../lib/auth.ts"],"sourcesContent":["import { Pool, QueryResult, QueryResultRow } from 'pg';\n\nlet pool: Pool | null = null;\n\nexport function getDatabase(): Pool {\n  if (!pool) {\n    const connectionString = process.env.DATABASE_URL;\n    \n    if (!connectionString) {\n      console.error('DATABASE_URL is not defined in environment variables');\n      throw new Error('DATABASE_URL is not configured');\n    }\n    \n    console.log('Initializing database connection pool...');\n    console.log('Database URL format:', connectionString.replace(/:[^:@]+@/, ':****@')); // Hide password\n    \n    // SSLè¨­å®š: RDSã¯è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ rejectUnauthorized: false\n    const sslConfig = {\n      rejectUnauthorized: false // RDSã®è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’è¨±å¯\n    };\n    \n    pool = new Pool({\n      connectionString,\n      ssl: sslConfig,\n      max: 20,\n      idleTimeoutMillis: 30000,\n      connectionTimeoutMillis: 5000,\n    });\n\n    pool.on('error', (err) => {\n      console.error('Unexpected error on idle client', err);\n    });\n\n    pool.on('connect', () => {\n      console.log('Database connection established');\n    });\n  }\n  return pool;\n}\n\nexport async function query<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<QueryResult<T>> {\n  const db = getDatabase();\n  try {\n    const start = Date.now();\n    const result = await db.query<T>(text, params);\n    const duration = Date.now() - start;\n    console.log('Query executed:', { sql: text.substring(0, 100), duration: `${duration}ms`, rows: result.rowCount });\n    return result;\n  } catch (error: any) {\n    console.error('Database query error:', {\n      sql: text.substring(0, 200),\n      params,\n      error: error.message,\n      code: error.code,\n      detail: error.detail\n    });\n    throw error;\n  }\n}\n\nexport async function getOne<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T | null> {\n  const result = await query<T>(text, params);\n  return result.rows[0] || null;\n}\n\nexport async function getAll<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T[]> {\n  const result = await query<T>(text, params);\n  return result.rows;\n}\n\nexport async function insert<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T> {\n  const result = await query<T>(text, params);\n  return result.rows[0];\n}\n\nexport async function update<T extends QueryResultRow = any>(\n  text: string,\n  params?: any[]\n): Promise<T | null> {\n  const result = await query<T>(text, params);\n  return result.rows[0] || null;\n}\n\nexport async function remove(text: string, params?: any[]): Promise<boolean> {\n  const result = await query(text, params);\n  return result.rowCount !== null && result.rowCount > 0;\n}\n","import jwt from 'jsonwebtoken';\nimport { query } from './db';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'fallback_secret_key';\n\n// ãƒ¡ãƒ¼ãƒ«é€ä¿¡ç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”¨ï¼‰\nexport function generatePasswordResetToken(userId: number, email: string): string {\n  return jwt.sign(\n    { userId, email, type: 'password_reset' },\n    JWT_SECRET,\n    { expiresIn: '1h' } // 1æ™‚é–“æœ‰åŠ¹\n  );\n}\n\n// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã®æ¤œè¨¼\nexport function verifyPasswordResetToken(token: string): { userId: number; email: string } | null {\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET) as any;\n    if (decoded.type !== 'password_reset') {\n      return null;\n    }\n    return { userId: decoded.userId, email: decoded.email };\n  } catch {\n    return null;\n  }\n}\n\n// ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ\nexport function generateWelcomeEmail(name: string, email: string): string {\n  const appUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n  \n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }\n    .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; }\n    .button { display: inline-block; background: #667eea; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; margin: 20px 0; }\n    .footer { text-align: center; margin-top: 30px; color: #999; font-size: 12px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>ğŸ‰ ã”ç™»éŒ²ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</h1>\n    </div>\n    <div class=\"content\">\n      <p>ã“ã‚“ã«ã¡ã¯ã€${name || email}ã•ã‚“</p>\n      \n      <p>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¸ã®ã”ç™»éŒ²ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>\n      \n      <p>ã“ã‚Œã‹ã‚‰ãƒ©ã‚¤ãƒ–é…ä¿¡ã‚„ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å‹•ç”»ã‚’ãŠæ¥½ã—ã¿ã„ãŸã ã‘ã¾ã™ã€‚</p>\n      \n      <div style=\"text-align: center;\">\n        <a href=\"${appUrl}/events\" class=\"button\">ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚’è¦‹ã‚‹</a>\n      </div>\n      \n      <h3>ğŸ“ ã”åˆ©ç”¨æ–¹æ³•</h3>\n      <ol>\n        <li>ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã§èˆˆå‘³ã®ã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸æŠ</li>\n        <li>ãƒã‚±ãƒƒãƒˆã‚’è³¼å…¥</li>\n        <li>ãƒã‚¤ãƒšãƒ¼ã‚¸ã‹ã‚‰è¦–è´ãƒªãƒ³ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹</li>\n      </ol>\n      \n      <p>ã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚</p>\n    </div>\n    <div class=\"footer\">\n      <p>ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>\n      <p>&copy; 2026 Streaming Platform. All rights reserved.</p>\n    </div>\n  </div>\n</body>\n</html>\n  `.trim();\n}\n\nexport function generatePurchaseConfirmationEmail(\n  userName: string,\n  email: string,\n  eventTitle: string,\n  ticketName: string,\n  amount: number,\n  currency: string,\n  accessToken: string,\n  eventSlug: string\n): string {\n  const appUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n  const watchUrl = `${appUrl}/watch/${eventSlug}?token=${accessToken}`;\n  const price = new Intl.NumberFormat('ja-JP', {\n    style: 'currency',\n    currency: currency.toUpperCase(),\n  }).format(amount / 100);\n  \n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }\n    .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; }\n    .ticket-info { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #667eea; }\n    .button { display: inline-block; background: #667eea; color: white; padding: 15px 40px; text-decoration: none; border-radius: 5px; margin: 20px 0; font-weight: bold; }\n    .footer { text-align: center; margin-top: 30px; color: #999; font-size: 12px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>âœ… ã”è³¼å…¥ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™</h1>\n    </div>\n    <div class=\"content\">\n      <p>ã“ã‚“ã«ã¡ã¯ã€${userName || email}ã•ã‚“</p>\n      \n      <p>ãƒã‚±ãƒƒãƒˆã®ã”è³¼å…¥ãŒå®Œäº†ã—ã¾ã—ãŸã€‚</p>\n      \n      <div class=\"ticket-info\">\n        <h3>ğŸ“‹ è³¼å…¥å†…å®¹</h3>\n        <table style=\"width: 100%;\">\n          <tr>\n            <td><strong>ã‚¤ãƒ™ãƒ³ãƒˆå:</strong></td>\n            <td>${eventTitle}</td>\n          </tr>\n          <tr>\n            <td><strong>ãƒã‚±ãƒƒãƒˆ:</strong></td>\n            <td>${ticketName}</td>\n          </tr>\n          <tr>\n            <td><strong>é‡‘é¡:</strong></td>\n            <td>${price}</td>\n          </tr>\n        </table>\n      </div>\n      \n      <div style=\"text-align: center; background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n        <h3>ğŸ¬ è¦–è´ãƒšãƒ¼ã‚¸ã¯ã“ã¡ã‚‰</h3>\n        <a href=\"${watchUrl}\" class=\"button\">è¦–è´ãƒšãƒ¼ã‚¸ã‚’é–‹ã</a>\n        <p style=\"font-size: 12px; color: #856404; margin-top: 10px;\">\n          âš ï¸ ã“ã®ãƒªãƒ³ã‚¯ã¯30æ—¥é–“æœ‰åŠ¹ã§ã™\n        </p>\n      </div>\n      \n      <p>ãƒã‚¤ãƒšãƒ¼ã‚¸ã‹ã‚‰ã‚‚è¦–è´ãƒªãƒ³ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š<br>\n      <a href=\"${appUrl}/mypage\">${appUrl}/mypage</a></p>\n      \n      <p>ç´ æ™´ã‚‰ã—ã„è¦–è´ä½“é¨“ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ï¼</p>\n    </div>\n    <div class=\"footer\">\n      <p>ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>\n      <p>&copy; 2026 Streaming Platform. All rights reserved.</p>\n    </div>\n  </div>\n</body>\n</html>\n  `.trim();\n}\n\nexport function generatePasswordResetEmail(\n  email: string,\n  resetToken: string\n): string {\n  const appUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n  const resetUrl = `${appUrl}/reset-password?token=${resetToken}`;\n  \n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }\n    .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; }\n    .warning { background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 5px; margin: 20px 0; }\n    .button { display: inline-block; background: #667eea; color: white; padding: 15px 40px; text-decoration: none; border-radius: 5px; margin: 20px 0; font-weight: bold; }\n    .footer { text-align: center; margin-top: 30px; color: #999; font-size: 12px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>ğŸ” ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ</h1>\n    </div>\n    <div class=\"content\">\n      <p>ã“ã‚“ã«ã¡ã¯ã€</p>\n      \n      <p>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚</p>\n      \n      <p>ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š</p>\n      \n      <div style=\"text-align: center;\">\n        <a href=\"${resetUrl}\" class=\"button\">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ</a>\n      </div>\n      \n      <div class=\"warning\">\n        <strong>âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …</strong>\n        <ul>\n          <li>ã“ã®ãƒªãƒ³ã‚¯ã¯1æ™‚é–“ã®ã¿æœ‰åŠ¹ã§ã™</li>\n          <li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ã„ãªã„å ´åˆã¯ã€ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚’ç„¡è¦–ã—ã¦ãã ã•ã„</li>\n          <li>ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¾ã§ã€ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯æœ‰åŠ¹ã§ã™</li>\n        </ul>\n      </div>\n      \n      <p style=\"font-size: 12px; color: #666;\">\n        ãƒªãƒ³ã‚¯ãŒæ©Ÿèƒ½ã—ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ãã ã•ã„ï¼š<br>\n        <code style=\"background: #e9ecef; padding: 5px; display: block; word-break: break-all; margin-top: 10px;\">\n          ${resetUrl}\n        </code>\n      </p>\n    </div>\n    <div class=\"footer\">\n      <p>ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>\n      <p>&copy; 2026 Streaming Platform. All rights reserved.</p>\n    </div>\n  </div>\n</body>\n</html>\n  `.trim();\n}\n\n// AWS SES ãƒ¡ãƒ¼ãƒ«é€ä¿¡é–¢æ•°ï¼ˆAWS SDKè¨­å®šãŒå¿…è¦ï¼‰\nexport async function sendEmail(\n  to: string,\n  subject: string,\n  htmlBody: string\n): Promise<{ success: boolean; error?: string }> {\n  try {\n    // ç’°å¢ƒå¤‰æ•°ã§ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚’ç„¡åŠ¹åŒ–ã§ãã‚‹\n    if (process.env.DISABLE_EMAIL === 'true') {\n      console.log('Email sending is disabled. Would send to:', to);\n      console.log('Subject:', subject);\n      return { success: true };\n    }\n\n    // AWS SESè¨­å®šãŒå¿…è¦ãªå ´åˆ\n    // const AWS = require('aws-sdk');\n    // const ses = new AWS.SES({ region: process.env.AWS_REGION || 'ap-northeast-1' });\n    \n    // const params = {\n    //   Source: process.env.EMAIL_FROM || 'noreply@example.com',\n    //   Destination: { ToAddresses: [to] },\n    //   Message: {\n    //     Subject: { Data: subject, Charset: 'UTF-8' },\n    //     Body: { Html: { Data: htmlBody, Charset: 'UTF-8' } }\n    //   }\n    // };\n    \n    // await ses.sendEmail(params).promise();\n    \n    // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šãƒ¡ãƒ¼ãƒ«å†…å®¹ã‚’ãƒ­ã‚°å‡ºåŠ›\n    console.log('=== EMAIL DEBUG ===');\n    console.log('To:', to);\n    console.log('Subject:', subject);\n    console.log('Body length:', htmlBody.length);\n    console.log('==================');\n    \n    return { success: true };\n  } catch (error: any) {\n    console.error('Email send error:', error);\n    return { success: false, error: error.message };\n  }\n}\n","import jwt from 'jsonwebtoken';\nimport { JWTPayload } from './types';\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\n\nexport function generateAccessToken(payload: Omit<JWTPayload, 'exp'>): string {\n  const expiresIn = 24 * 60 * 60; // 24 hours\n  return jwt.sign(\n    {\n      ...payload,\n      exp: Math.floor(Date.now() / 1000) + expiresIn,\n    },\n    JWT_SECRET\n  );\n}\n\nexport function verifyAccessToken(token: string): JWTPayload | null {\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET) as JWTPayload;\n    return decoded;\n  } catch (error) {\n    console.error('JWT verification failed:', error);\n    return null;\n  }\n}\n\nexport function decodeAccessToken(token: string): JWTPayload | null {\n  try {\n    const decoded = jwt.decode(token) as JWTPayload;\n    return decoded;\n  } catch (error) {\n    console.error('JWT decode failed:', error);\n    return null;\n  }\n}\n"],"names":[],"mappings":"ypCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,yCAEA,IAAI,EAAoB,KAsCjB,eAAe,EACpB,CAAY,CACZ,CAAc,EAEd,IAAM,EAxCD,AAwCM,SAxCG,EACd,GAAI,CAAC,EAAM,CACT,IAAM,EAAmB,QAAQ,GAAG,CAAC,YAAY,CAEjD,GAAI,CAAC,EAEH,MADA,QAAQ,EADa,GACR,CAAC,wDACR,AAAI,MAAM,kCAGlB,QAAQ,GAAG,CAAC,4CACZ,QAAQ,GAAG,CAAC,uBAAwB,EAAiB,OAAO,CAAC,WAAY,WAezE,CARA,AAPqF,EAO9E,IAAI,EAAA,IAAI,CAAC,GAPqF,eAQnG,EACA,IANgB,CAMX,AALL,oBAAoB,CACtB,EAKE,GAN0B,CAMrB,GACL,aAP2C,KAOxB,IACnB,wBAAyB,GAC3B,EAAA,EAEK,EAAE,CAAC,QAAS,AAAC,IAChB,QAAQ,KAAK,CAAC,kCAAmC,EACnD,GAEA,EAAK,EAAE,CAAC,UAAW,KACjB,QAAQ,GAAG,CAAC,kCACd,EACF,CACA,OAAO,CACT,IAOE,GAAI,CACF,IAAM,EAAQ,KAAK,GAAG,GAChB,EAAS,MAAM,EAAG,KAAK,CAAI,EAAM,GACjC,EAAW,KAAK,GAAG,GAAK,EAE9B,OADA,QAAQ,GAAG,CAAC,kBAAmB,CAAE,IAAK,EAAK,SAAS,CAAC,EAAG,KAAM,SAAU,CAAA,EAAG,EAAS,EAAE,CAAC,CAAE,KAAM,EAAO,QAAQ,AAAC,GACxG,CACT,CAAE,MAAO,EAAY,CAQnB,MAPA,QAAQ,KAAK,CAAC,wBAAyB,CACrC,IAAK,EAAK,SAAS,CAAC,EAAG,KACvB,SACA,MAAO,EAAM,OAAO,CACpB,KAAM,EAAM,IAAI,CAChB,OAAQ,EAAM,MAAM,AACtB,GACM,CACR,CACF,CAEO,eAAe,EACpB,CAAY,CACZ,CAAc,EAGd,MAAO,CADQ,MAAM,EAAS,EAAM,EAAA,EACtB,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEO,eAAe,EACpB,CAAY,CACZ,CAAc,EAGd,MAAO,CADQ,MAAM,EAAS,EAAM,EAAA,EACtB,IAAI,AACpB,CAEO,eAAe,EACpB,CAAY,CACZ,CAAc,EAGd,MADe,AACR,OADc,EAAS,EAAM,EAAA,EACtB,IAAI,CAAC,EAAE,AACvB,CAEO,eAAe,EACpB,CAAY,CACZ,CAAc,EAGd,MADe,AACR,OADc,EAAS,EAAM,EAAA,EACtB,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEO,eAAe,EAAO,CAAY,CAAE,CAAc,EACvD,IAAM,EAAS,MAAM,EAAM,EAAM,GACjC,OAA2B,OAApB,EAAO,QAAQ,EAAa,EAAO,QAAQ,CAAG,CACvD,yUClGA,IAAA,EAAA,EAAA,CAAA,CAAA,OAGA,IAAM,EAAa,QAAQ,GAAG,CAAC,UAAU,EAAI,sBAGtC,SAAS,EAA2B,CAAc,CAAE,CAAa,EACtE,OAAO,EAAA,OAAG,CAAC,IAAI,CACb,QAAE,QAAQ,EAAO,KAAM,gBAAiB,EACxC,EACA,CAAE,UAAW,IAAK,EAEtB,AAFwB,CAKjB,OALyB,EAKhB,EAAyB,CAAa,EACpD,GAAI,CACF,IAAM,EAAU,EAAA,OAAG,CAAC,MAAM,CAAC,EAAO,GAClC,GAAqB,kBAAkB,CAAnC,EAAQ,IAAI,CACd,OAAO,KAET,MAAO,CAAE,OAAQ,EAAQ,MAAM,CAAE,MAAO,EAAQ,KAAK,AAAC,CACxD,CAAE,KAAM,CACN,OAAO,IACT,CACF,CAGO,SAAS,EAAqB,CAAY,CAAE,CAAa,EAG9D,MAAO,CAAC;;;;;;;;;;;;;;;;;;;;iBAoBO,GAAQ,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;GA0B5B,CAAC,IAAI,EACR,CAEO,SAAS,EACd,CAAgB,CAChB,CAAa,CACb,CAAkB,CAClB,CAAkB,CAClB,CAAc,CACd,CAAgB,CAChB,CAAmB,CACnB,CAAiB,EAEjB,IAAM,EAAS,OAAA,iBACT,EAAW,CAAA,CADiC,CAC9B,EAAO,OAAO,EAAE,EAAU,OAAO,EAAE,EAAA,CAAa,CAC9D,EAAQ,IAAI,KAAK,YAAY,CAAC,QAAS,CAC3C,MAAO,WACP,SAAU,EAAS,WAAW,EAChC,GAAG,MAAM,CAAC,EAAS,KAEnB,MAAO,CAAC;;;;;;;;;;;;;;;;;;;;;eAqBK,EAAE,GAAY,EAAM;;;;;;;;;gBASnB,EAAE,EAAW;;;;gBAIb,EAAE,EAAW;;;;gBAIb,EAAE,EAAM;;;;;;;iBAOP,EAAE,EAAS;;;;;;;eAOb,EAAE,EAAO,SAAS,EAAE,EAAO;;;;;;;;;;;EAWxC,CAAC,CAAC,IAAI,EACR,CAEO,SAAS,EACd,CAAa,CACb,CAAkB,EAGlB,IAAM,EAAW,GAAG,OAAO,sBAAsB,cAAE,GAAY,CAE/D,MAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;iBA4BO,EAAE,EAAS;;;;;;;;;;;;;;;UAelB,EAAE,SAAS;;;;;;;;;;;EAWnB,CAAC,CAAC,IAAI,EACR,CAGO,eAAe,EACpB,CAAU,CACV,CAAe,CACf,CAAgB,EAEhB,GAAI,CAEF,GAAI,AAA8B,QAAQ,SAA9B,GAAG,CAAC,aAAa,CAG3B,OAFA,QAAQ,GAAG,CAAC,4CAA6C,GACzD,QAAQ,GAAG,CAAC,WAAY,GACjB,CAAE,SAAS,CAAK,EAyBzB,OANA,QAAQ,GAAG,CAAC,uBACZ,QAAQ,GAAG,CAAC,MAAO,GACnB,QAAQ,GAAG,CAAC,WAAY,GACxB,QAAQ,GAAG,CAAC,eAAgB,EAAS,MAAM,EAC3C,QAAQ,GAAG,CAAC,sBAEL,CAAE,SAAS,CAAK,CACzB,CAAE,MAAO,EAAY,CAEnB,OADA,QAAQ,KAAK,CAAC,oBAAqB,GAC5B,CAAE,SAAS,EAAO,MAAO,EAAM,OAAO,AAAC,CAChD,CACF,gOC5QA,IAAA,EAAA,EAAA,CAAA,CAAA,OAGA,IAAM,EAAa,QAAQ,GAAG,CAAC,UAAU,EAAI,kBAEtC,SAAS,EAAoB,CAAgC,EAElE,OAAO,EAAA,OAAG,CAAC,IAAI,CACb,CACE,GAAG,CAAO,CACV,IAAK,KAAK,KAAK,CAAC,KAAK,GAAG,GAAK,KAJf,GAIuB,EACvC,AALqB,EAMrB,EAEJ,CAR8B,AAUvB,IAV2B,KAUlB,EAAkB,CAAa,EAC7C,CAX2C,EAWvC,CAEF,OADgB,AACT,EADS,OAAG,CAAC,MAAM,CAAC,EAAO,EAEpC,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,2BAA4B,GACnC,IACT,CACF"}
{"version":3,"sources":["../../../../components/EventCard.tsx","../../../../app/artists/%5Bslug%5D/page.tsx"],"sourcesContent":["import Link from 'next/link';\nimport Image from 'next/image';\nimport { Event } from '@/lib/types';\nimport { format } from 'date-fns';\nimport { ja } from 'date-fns/locale';\n\ninterface EventCardProps {\n  event: Event & { artist_name?: string };\n}\n\nexport default function EventCard({ event }: EventCardProps) {\n  const isLive = event.status === 'live';\n  const badgeColor = isLive ? 'bg-red-600 animate-pulse' : 'bg-blue-600';\n  const badgeText = isLive ? 'LIVE' : '配信予定';\n  const borderClass = isLive\n    ? 'border-red-500 ring-2 ring-red-500/50'\n    : 'border-gray-800 hover:border-purple-500';\n\n  return (\n    <Link\n      href={`/events/${event.slug}`}\n      className={`block bg-black bg-opacity-40 backdrop-blur-md rounded-xl overflow-hidden border ${borderClass} transition hover:scale-105 duration-300`}\n    >\n      <div className=\"aspect-video bg-gray-800 relative\">\n        {event.thumbnail_url ? (\n          <Image\n            src={event.thumbnail_url}\n            alt={event.title}\n            fill\n            className=\"object-cover\"\n          />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center\">\n            <i className=\"fas fa-image text-gray-600 text-4xl\"></i>\n          </div>\n        )}\n        <div\n          className={`${badgeColor} text-white px-3 py-1 rounded-full text-sm font-bold absolute top-2 right-2`}\n        >\n          {isLive && <i className=\"fas fa-circle text-xs mr-1\"></i>}\n          {badgeText}\n        </div>\n      </div>\n      <div className=\"p-4\">\n        <h3 className=\"text-white font-bold text-lg mb-2 line-clamp-2\">\n          {event.title}\n        </h3>\n        {event.start_time && (\n          <p className=\"text-gray-400 text-sm mb-2\">\n            <i className=\"fas fa-clock mr-1\"></i>\n            {format(new Date(event.start_time), 'yyyy年M月d日(E) HH:mm', {\n              locale: ja,\n            })}\n          </p>\n        )}\n        {event.description && (\n          <p className=\"text-gray-500 text-sm line-clamp-2\">\n            {event.description}\n          </p>\n        )}\n      </div>\n    </Link>\n  );\n}\n","import { notFound } from 'next/navigation';\nimport Navigation from '@/components/Navigation';\nimport EventCard from '@/components/EventCard';\nimport { getOne, getAll } from '@/lib/db';\nimport { Artist, Event } from '@/lib/types';\nimport Image from 'next/image';\n\nexport const dynamic = 'force-dynamic';\n\nasync function getArtist(slug: string): Promise<Artist | null> {\n  try {\n    const artist = await getOne<Artist>(\n      'SELECT * FROM artists WHERE slug = $1',\n      [slug]\n    );\n    return artist;\n  } catch (error) {\n    console.error('Failed to fetch artist:', error);\n    return null;\n  }\n}\n\nasync function getArtistEvents(artistId: number): Promise<Event[]> {\n  try {\n    const events = await getAll<Event>(\n      `\n      SELECT e.*, a.name as artist_name\n      FROM events e\n      LEFT JOIN artists a ON e.artist_id = a.id\n      WHERE e.artist_id = $1\n      ORDER BY \n        CASE WHEN e.status = 'live' THEN 0 ELSE 1 END,\n        e.start_time ASC\n    `,\n      [artistId]\n    );\n    return events;\n  } catch (error) {\n    console.error('Failed to fetch events:', error);\n    return [];\n  }\n}\n\nexport default async function ArtistDetailPage({\n  params,\n}: {\n  params: Promise<{ slug: string }>;\n}) {\n  const { slug } = await params;\n  const artist = await getArtist(slug);\n\n  if (!artist) {\n    notFound();\n  }\n\n  const events = await getArtistEvents(artist.id);\n\n  return (\n    <>\n      <Navigation />\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        {/* Artist Header */}\n        <div className=\"bg-black bg-opacity-40 backdrop-blur-md rounded-xl border border-gray-800 p-6 md:p-8 mb-8\">\n          <div className=\"flex flex-col md:flex-row gap-6 items-start\">\n            {/* Artist Image */}\n            <div className=\"w-32 h-32 md:w-48 md:h-48 rounded-full overflow-hidden bg-gray-800 flex-shrink-0 relative\">\n              {artist.image_url ? (\n                <Image\n                  src={artist.image_url}\n                  alt={artist.name}\n                  fill\n                  className=\"object-cover\"\n                  priority\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center\">\n                  <i className=\"fas fa-user text-gray-600 text-6xl\"></i>\n                </div>\n              )}\n            </div>\n\n            {/* Artist Info */}\n            <div className=\"flex-1\">\n              <h1 className=\"text-3xl md:text-5xl font-bold text-white mb-4\">\n                {artist.name}\n              </h1>\n              {artist.bio && (\n                <p className=\"text-gray-300 text-lg whitespace-pre-wrap\">\n                  {artist.bio}\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Events Section */}\n        <div>\n          <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-6\">\n            <i className=\"fas fa-calendar-alt text-purple-500 mr-2\"></i>\n            イベント\n          </h2>\n\n          {events.length > 0 ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {events.map((event) => (\n                <EventCard key={event.id} event={event} />\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center text-gray-400 py-8 bg-black bg-opacity-40 backdrop-blur-md rounded-xl border border-gray-800\">\n              <i className=\"fas fa-calendar-times text-4xl mb-2\"></i>\n              <p>現在、予定されているイベントはありません</p>\n            </div>\n          )}\n        </div>\n      </main>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}